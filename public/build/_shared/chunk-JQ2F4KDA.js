import{a as X}from"/build/_shared/chunk-PBDPE27U.js";import{a as M}from"/build/_shared/chunk-UUYQFIW2.js";import{a as N}from"/build/_shared/chunk-NJKAJ7NJ.js";import{b as q}from"/build/_shared/chunk-SA2BISYS.js";import{a as h,b as w}from"/build/_shared/chunk-VJBGBMKQ.js";import{H as L,P as U,a as f,m as S,r as $,x as T}from"/build/_shared/chunk-KV6SFFWO.js";import{l as C}from"/build/_shared/chunk-P4VL4XDR.js";import{e as F,g as O,h as R}from"/build/_shared/chunk-EUC6ZTEW.js";var r=F(O());var e=F(R());var V=()=>{let a=C().brand,p=C().user,[l,u]=(0,r.useState)(!1),n=C().brandConnection.influencer_count,g=C().brandComCam.completed_campaign,c=a.logo==""||a.logo==null||a.logo==null||a.logo=="0"?"images/avatar.png":a.logo,[y,t]=(0,r.useState)(!1),[b,x]=M("favbrand",{defaultValue:[]}),A=o=>{x([...b,o]),t(!0)},P=o=>{let s=[];for(let d=0;d<b.length;d++)b[d].id!=o.id&&s.push(b[d]);x(s),t(!1)},[i,H]=(0,r.useState)({rowCount:0,constCount:3,rate:0}),J=async()=>{let o={search:{type:"3",brand:a.id}},s=await h({method:"post",url:`${w}/api/search-review`,data:o}),d=0;for(let m=0;m<s.data.data.length;m++)d+=parseInt(s.data.data[m].rating1)+parseInt(s.data.data[m].rating2)+parseInt(s.data.data[m].rating3);H(m=>({rowCount:s.data.data.length,rate:d,constCount:3}))};(0,r.useEffect)(()=>{let o=!1;b.map((s,d)=>{s.id==a.id&&(o=!0)}),t(!!o),J()},[]);let[k,B]=(0,r.useState)(null),v=(0,r.useRef)(null),[j,I]=(0,r.useState)(!1);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:`w-full h-screen bg-gray-500 fixed top-0 left-0 bg-opacity-30 grid place-items-center ${j?"fixed":"hidden"}`,style:{zIndex:100},children:(0,e.jsxs)("div",{className:"p-6 bg-white rounded-xl shadow-xl w-96",children:[(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)("div",{className:"grow"}),(0,e.jsx)("div",{onClick:()=>{I(!1)},children:(0,e.jsx)(f,{icon:U,className:"font-bold text-2xl text-center text-primary"})})]}),(0,e.jsx)("h1",{className:"text-primary text-lg font-bold text-left",children:"Connect"}),(0,e.jsx)("textarea",{ref:v,className:"p-4 w-full h-40 outline-none border-2 bg-[#EEEEEE] focus:border-gray-300 rounded-md resize-none mt-4",placeholder:"message"}),k==""||k==null||k==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:k}),(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)("div",{className:"grow"}),(0,e.jsx)("div",{onClick:async()=>{var d,m,D,E;if(((d=v.current)==null?void 0:d.value)==null||((m=v.current)==null?void 0:m.value)==null||((D=v.current)==null?void 0:D.value)=="")return B("Message can't be blank");let o={campaignDraftId:"0",fromUserId:p.id,toUserId:a.id,comment:(E=v.current)==null?void 0:E.value},s=await h({method:"post",url:`${w}/api/add-chat`,data:o,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Options":"*","Access-Control-Allow-Methods":"*","X-Content-Type-Options":"*","Content-Type":"application/json",Accept:"*"}});return s.data.status?I(!1):B(s.data.message)},children:(0,e.jsx)(N,{text:"send",background:"bg-primary",textColor:"text-white"})})]})]})}),(0,e.jsxs)("div",{className:"w-full mt-4 shadow-xl bg-white rounded-xl",children:[(0,e.jsxs)("div",{className:"w-full relative",children:[(0,e.jsx)("div",{className:"absolute top-5 right-5",children:(0,e.jsx)(f,{onClick:()=>{let o={id:a.id,logo:c,name:a.name,email:a.email,website:a.webUrl};return y?P(o):A(o)},icon:T,className:`${y?"text-red-500":"text-gray-500"} h-12 w-12`})}),(0,e.jsx)("img",{src:"/images/products/shoe1.jpg",alt:"error",className:"w-full h-60 object-cover rounded-t-xl"})]}),(0,e.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,e.jsxs)("div",{className:"p-8 flex flex-row gap-x-3 lg:flex-col",children:[(0,e.jsx)("div",{children:(0,e.jsx)("img",{src:c,alt:"brand logo",className:"w-32 h-32 rounded-md"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h1",{className:"text-primary text-lg font-medium my-2",children:a.name}),(0,e.jsx)("p",{className:"text-primary text-md font-normal",children:"Category: Consumer Electronics"}),(0,e.jsxs)("p",{className:"text-primary text-md font-normal",children:["website: ",a.webUrl]}),(0,e.jsx)("div",{onClick:()=>{I(!0)},children:(0,e.jsx)(N,{text:"Connect",background:"bg-secondary",fontwidth:"font-bold"})})]})]}),(0,e.jsx)("div",{className:"h-72 w-[2px] bg-gray-300 hidden lg:block mt-8"}),(0,e.jsxs)("div",{className:"p-8",children:[(0,e.jsxs)("div",{className:"flex gap-x-4 flex-col md:flex-row gap-y-2",children:[(0,e.jsx)(_,{rate:isNaN(Math.round(i.rate/i.rowCount/i.constCount))?"0":Math.round(i.rate/i.rowCount/i.constCount).toString()}),(0,e.jsx)(G,{completed:g.toString()}),(0,e.jsx)(z,{connection:n.toString()})]}),(0,e.jsx)("h1",{className:"text-primary text-lg font-medium mt-4 mb-2",children:"Brand info"}),(0,e.jsx)("p",{className:"text-black text-sm font-normal",children:a.info})]})]})]}),(0,e.jsxs)("div",{className:"w-full mt-4 shadow-xl bg-white rounded-xl",children:[(0,e.jsxs)("div",{className:"flex mx-4 gap-4",children:[(0,e.jsx)("div",{onClick:()=>{u(!1)},children:(0,e.jsx)(N,{text:"Available Campaigns",background:`${l?"bg-gray-100":"bg-[#01FFF4]"}`,fontwidth:"font-bold",textColor:`${l?"text-gray-600":"text-black"}`})}),(0,e.jsx)("div",{onClick:()=>{u(!0)},children:(0,e.jsx)(N,{text:"Past associations",background:`${l?"bg-[#01FFF4]":"bg-gray-100"}`,fontwidth:"font-bold",textColor:`${l?"text-black":"text-gray-600"}`})})]}),l?(0,e.jsx)(K,{userId:p.id,brandId:a.id}):(0,e.jsx)(W,{brandId:a.id})]})]})},se=V,_=a=>(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"bg-gray-100 flex rounded-lg gap-x-4",children:[(0,e.jsx)("div",{className:"bg-gray-200 p-2 rounded-md grid place-items-center",children:(0,e.jsx)(f,{className:"text-black text-3xl",icon:S})}),(0,e.jsxs)("div",{className:"p-2",children:[(0,e.jsx)("h1",{className:"text-black text-lg font-bold",children:a.rate}),(0,e.jsx)("p",{className:"text-black text-sm font-normal",children:"Rating"})]})]})}),z=a=>(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"bg-gray-100 flex rounded-lg gap-x-4",children:[(0,e.jsx)("div",{className:"bg-gray-200 p-2 rounded-md grid place-items-center",children:(0,e.jsx)(f,{className:"text-black text-3xl",icon:$})}),(0,e.jsxs)("div",{className:"p-2",children:[(0,e.jsx)("h1",{className:"text-black text-lg font-bold",children:a.connection}),(0,e.jsx)("p",{className:"text-black text-sm font-normal",children:"Connections"})]})]})}),G=a=>(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"bg-gray-100 flex rounded-lg gap-x-4",children:[(0,e.jsx)("div",{className:"bg-gray-200 p-2 rounded-md grid place-items-center",children:(0,e.jsx)(f,{className:"text-black text-3xl",icon:L})}),(0,e.jsxs)("div",{className:"p-2",children:[(0,e.jsx)("h1",{className:"text-black text-lg font-bold",children:a.completed}),(0,e.jsx)("p",{className:"text-black text-sm font-normal",children:"Completed Campaigns"})]})]})}),W=a=>{let[p,l]=(0,r.useState)([]),[u,n]=(0,r.useState)([]);return(0,r.useEffect)(()=>{(async()=>{let c=await h({method:"post",url:`${w}/api/campaign-search`,data:{brand:a.brandId}});l(c.data.data)})()},[]),(0,r.useEffect)(()=>{(async()=>{let c=0,y=await Promise.all(p.map(async(t,b)=>{if(c>=5)return null;c++;let x=[];for(let i=0;i<t.platforms.length;i++)x.push(t.platforms[i].platformLogoUrl);let A=await q(t.campaignTypeId),P=t.brand.length==0||t.brand==null||t.brand==null||t.brand==""||t.brand.logo=="0"||t.brand.logo==null||t.brand.logo==null||t.brand.logo==""?"/images/avatar/user.png":t.brand.logo;return(0,e.jsx)("div",{children:(0,e.jsx)(X,{id:t.id,title:t.campaignName,weburl:t.brand.webUrl,platforms:x,maxval:t.costPerPost.split(".")[0],category:A,image:P,name:t.brand.name,currency:t.currency.code,btntext:"View More & Learn"})},b)}));n(y)})()},[p]),(0,e.jsx)(e.Fragment,{children:u.length==0?(0,e.jsx)("div",{className:"text-center w-full px-4 py-8 text-2xl text-gray-600 font-semibold ",children:"This brand haven't created any campaign."}):(0,e.jsx)("div",{className:"flex flex-wrap gap-6 pb-8 pt-6",children:u})})},K=a=>{let[p,l]=(0,r.useState)([]),u=async()=>{let n={search:{fromUser:a.userId,influencer:a.userId,brand:a.brandId}},g=await h.post(`${w}/api/search-draft`,n);g.data.status==!0&&l(g.data.data)};return(0,r.useEffect)(()=>{u()},[]),(0,e.jsx)(e.Fragment,{children:p.length==0?(0,e.jsx)("div",{className:"text-center w-full px-4 py-8 text-2xl text-gray-600 font-semibold ",children:"This brand have no past associations with you."}):(0,e.jsx)("div",{className:"flex flex-wrap gap-6 pb-8 pt-6",children:p.map((n,g)=>{let c=n.brand.length==0||n.brand==null||n.brand==null||n.brand==""||n.brand.logo=="0"||n.brand.logo==null||n.brand.logo==null||n.brand.logo==""?"/images/avatar/user.png":n.brand.logo;return(0,e.jsxs)("div",{className:"my-2 p-4 bg-white rounded-lg shadow-lg w-60",children:[(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)("img",{src:c,alt:"influencer pic",className:"w-10 h-10 shrink-0 rounded-md"}),(0,e.jsxs)("div",{className:"ml-2",children:[(0,e.jsx)("p",{className:"text-md font-medium",children:n.brand.name}),(0,e.jsx)("p",{className:"text-sm font-medium",children:n.brand.email})]})]}),(0,e.jsx)("p",{className:"mt-2 text-md font-medium",children:"Description"}),(0,e.jsx)("p",{className:"text-sm font-medium",children:n.description}),(0,e.jsx)("p",{className:"mt-2 text-md font-medium",children:"Attachment"}),(0,e.jsx)("a",{target:"_blank",className:"mt-2 text-sm font-normal border-2 border-blue-500 inline-block my-2 py-1 px-4  text-blue-500 hover:text-white hover:bg-blue-500",href:n.attach01,children:"View Doc"}),(0,e.jsx)("p",{className:"mt-2 text-md font-medium",children:"Status"}),(0,e.jsx)("p",{className:`mt-2 text-md text-white font-medium text-center rounded-md ${n.status.name=="ACCEPTED"?"bg-green-500":n.status.name=="PENDING"?"bg-yellow-500":"bg-red-500"}`,children:n.status.name})]},g)})})})};export{se as a,_ as b,z as c,G as d};
