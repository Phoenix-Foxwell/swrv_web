import{a as j}from"/build/_shared/chunk-JR6ZSNAI.js";import{a as F}from"/build/_shared/chunk-NJKAJ7NJ.js";import{a as v,b as h}from"/build/_shared/chunk-VJBGBMKQ.js";import{J as N,X as I,a as b}from"/build/_shared/chunk-KV6SFFWO.js";import{l as $}from"/build/_shared/chunk-P4VL4XDR.js";import{e as k,g as U,h as T}from"/build/_shared/chunk-EUC6ZTEW.js";var a=k(U());var e=k(T()),E=new j("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",{apiVersion:"2022-11-15"});var L=()=>{let n=$(),i=n.brandId,l=n.campaignId,x=n.userId,u=n.draftId,p=n.cpp,o=n.currency,r=n.name,[c,m]=(0,a.useState)(!1),[s,g]=(0,a.useState)(0),f=async()=>{let y={search:{type:"3",campaign:l,brand:i,influencer:x}};(await v({method:"post",url:`${h}/api/search-review`,data:y})).data.data.length>0&&m(!0)};return(0,a.useEffect)(()=>{f()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"w-full mt-4 shadow-xl bg-white rounded-xl",children:(0,e.jsxs)("div",{className:"flex mx-4 gap-4",children:[(0,e.jsx)("div",{onClick:()=>{g(0)},children:(0,e.jsx)(F,{text:"Insights",background:`${s==0?"bg-[#01FFF4]":"bg-gray-100"}`,fontwidth:"font-bold",textColor:`${s==0?"text-black":"text-gray-600"}`})}),(0,e.jsx)("div",{onClick:()=>{g(1)},children:(0,e.jsx)(F,{text:"Payments",background:`${s==1?"bg-[#01FFF4]":"bg-gray-100"}`,fontwidth:"font-bold",textColor:`${s==1?"text-black":"text-gray-600"}`})}),(0,e.jsx)("div",{onClick:()=>{g(3)},children:(0,e.jsx)(F,{text:"Schedule",background:`${s==3?"bg-[#01FFF4]":"bg-gray-100"}`,fontwidth:"font-bold",textColor:`${s==3?"text-black":"text-gray-600"}`})})]})}),(0,e.jsxs)("div",{className:"flex flex-wrap gap-6 mt-6",children:[s==0?(0,e.jsx)("div",{}):(0,e.jsx)(e.Fragment,{}),s==1?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(H,{userid:x,campaingid:l,currency:o,draft:u})}):(0,e.jsx)(e.Fragment,{}),s==3?(0,e.jsx)(B,{draftid:u}):(0,e.jsx)(e.Fragment,{})]})]})},M=L,H=n=>{let[i,l]=(0,a.useState)([]),[x,u]=(0,a.useState)(!1),[p,o]=(0,a.useState)(!1),[r,c]=(0,a.useState)(null),[m,s]=(0,a.useState)(null),g=async()=>{let t={search:{campaigndraft:n.draft,campaign:n.campaingid,influencer:n.userid}},d=await v.post(`${h}/api/get-req-pay`,t);d.data.status==!0&&l(d.data.data)};(0,a.useEffect)(()=>{g()},[]);let f=async()=>{let t={id:m,status:"2",refNo:`${new Date().toLocaleDateString()}_${n.userid}_${n.campaingid}`},d=await v.post(`${h}/api/update-payment`,t);if(d.data.staus==!1)return c(d.data.message);u(!1),window.location.reload()},y=async()=>{let t={id:m,status:"3"},d=await v.post(`${h}/api/update-payment`,t);if(d.data.staus==!1)return c(d.data.message);o(!1),window.location.reload()},w=async()=>{let t=await E.checkout.sessions.create({payment_method_types:["card"],mode:"payment",line_items:[{price_data:{currency:"inr",product_data:{name:"Example Product",images:["https://plus.unsplash.com/premium_photo-1684952849219-5a0d76012ed2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1032&q=80"]},unit_amount:4200},quantity:1}],success_url:"https://your-website.com/success",cancel_url:"https://your-website.com/cancel"});window.location.assign(t.url==null?"":t.url)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:`fixed top-0 left-0  h-screen w-full bg-slate-900 bg-opacity-10 place-items-center ${x?"grid":"hidden"}`,children:(0,e.jsxs)("div",{className:"bg-white w-72 shadow-lg p-4 rounded-lg",children:[(0,e.jsx)("p",{className:"text-center font-medium text-2xl",children:"Accept"}),(0,e.jsx)("div",{className:"w-full bg-gray-400 h-[1px] my-2"}),(0,e.jsx)("p",{className:"text-center font-medium text-gray-800",children:"Are you sure you want to accept this payment?"}),r==""||r==null||r==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:r}),(0,e.jsxs)("div",{className:"flex mt-2",children:[(0,e.jsxs)("button",{onClick:()=>{u(!1)},className:"bg-white rounded-xl text-red-500 font-normal border-2 border-red-500 py-1 px-2 w-28 hover:text-white hover:bg-red-500",children:[(0,e.jsx)(b,{className:"mx-2",icon:N}),"Cancel"]}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsxs)("button",{onClick:w,className:"bg-white rounded-xl text-green-500 font-normal border-2 border-green-500 py-1 px-2 w-28 hover:text-white hover:bg-green-500",children:[(0,e.jsx)(b,{className:"mx-2",icon:I}),"Accept"]})]})]})}),(0,e.jsx)("div",{className:`fixed top-0 left-0  h-screen w-full bg-slate-900 bg-opacity-10 place-items-center ${p?"grid":"hidden"}`,children:(0,e.jsxs)("div",{className:"bg-white w-72 shadow-lg p-4 rounded-lg",children:[(0,e.jsx)("p",{className:"text-center font-medium text-2xl",children:"Reject"}),(0,e.jsx)("p",{className:"text-center font-medium text-gray-800",children:"Are you sure you want to reject this payment?"}),r==""||r==null||r==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:r}),(0,e.jsxs)("div",{className:"flex mt-2",children:[(0,e.jsxs)("button",{onClick:()=>{o(!1)},className:"bg-white rounded-xl text-red-500 font-normal border-2 border-red-500 py-1 px-2 w-28 hover:text-white hover:bg-red-500",children:[(0,e.jsx)(b,{className:"mx-2",icon:N}),"Cancel"]}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsxs)("button",{onClick:y,className:"bg-white rounded-xl text-green-500 font-normal border-2 border-green-500 py-1 px-2 w-28 hover:text-white hover:bg-green-500",children:[(0,e.jsx)(b,{className:"mx-2",icon:I}),"Reject"]})]})]})}),(0,e.jsx)("div",{className:"p-4 rounded-xl shadow-xl bg-white w-full",children:i.length==0?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{children:"No payment request is pending"})}):(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-md font-medium",children:"Requested Payment"}),(0,e.jsx)("div",{className:"w-full bg-gray-400 h-[1px] my-2"}),(0,e.jsx)("div",{className:"flex flex-wrap gap-6",children:i.map((t,d)=>(0,e.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow-lg w-72",children:[(0,e.jsx)("p",{className:"mt-2 text-md font-medium",children:"Requested by"}),(0,e.jsx)("div",{className:"w-full h-[2px] bg-gray-700"}),(0,e.jsxs)("div",{className:"flex mt-4",children:[(0,e.jsx)("img",{src:t.influencer.pic,alt:"influencer pic",className:"w-10 h-10 shrink-0 rounded-md object-center object-cover"}),(0,e.jsxs)("div",{className:"ml-2",children:[(0,e.jsx)("p",{className:"text-md font-medium",children:t.influencer.name.split("@")[0]}),(0,e.jsx)("p",{className:"text-sm font-medium",children:t.influencer.email})]})]}),(0,e.jsx)("p",{className:"mt-2 text-md font-medium",children:"Amount"}),(0,e.jsxs)("p",{className:"text-sm font-medium",children:[t.amount.toString().split(".")[0]," ",n.currency]}),parseInt(t.status.code)==2?(0,e.jsx)("p",{className:"py-1 px-4 text-center text-white bg-green-500 rounded-md my-2",children:"Accepted"}):parseInt(t.status.code)==3?(0,e.jsx)("p",{className:"py-1 px-4 text-center text-white bg-red-500 rounded-md my-2",children:"Rejected"}):(0,e.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,e.jsxs)("button",{onClick:()=>{s(t.id),u(!0)},className:"bg-white  text-green-500 font-normal border-2 border-green-500 py-1 px-2 w-28 hover:text-white hover:bg-green-500",children:[(0,e.jsx)(b,{className:"mx-2",icon:I}),"Accept"]}),(0,e.jsxs)("button",{onClick:()=>{s(t.id),o(!0)},className:"bg-white  text-red-500 font-normal border-2 border-red-500 py-1 px-2 w-28 hover:text-white hover:bg-red-500",children:[(0,e.jsx)(b,{className:"mx-2",icon:N}),"Reject"]})]})]},d))})]})})]})},B=n=>{let i=(0,a.useRef)(null),[l,x]=(0,a.useState)(),u=f=>{x(f.target.value.replace(/\D/g,""))},p=(0,a.useRef)(null),o=(0,a.useRef)(null),[r,c]=(0,a.useState)(null),[m,s]=(0,a.useState)(null),g=async()=>{var f,y,w,t,d,C,D,q,R,S,P,A;if(c(null),((f=i.current)==null?void 0:f.value)==null||((y=i.current)==null?void 0:y.value)==null||((w=i.current)==null?void 0:w.value)=="")c("Fill the publication type");else if(l==null||l==null||l==0)c("Fill the target reach");else if(((t=p.current)==null?void 0:t.value)==null||((d=p.current)==null?void 0:d.value)==null||((C=p.current)==null?void 0:C.value)=="")c("Fill the Publication time");else if(((D=o.current)==null?void 0:D.value)==null||((q=o.current)==null?void 0:q.value)==null||((R=o.current)==null?void 0:R.value)=="")c("Fill the draft approval deadline");else{let _=await v.post(`${h}/api/update-draft`,{id:n.draftid,publication_type:(S=i.current)==null?void 0:S.value,target_react:l,publication_time:(P=p.current)==null?void 0:P.value,draft_approval:(A=o.current)==null?void 0:A.value});_.data.status?(s("Schedule is updated."),window.location.reload()):c(_.data.message)}};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"p-4 rounded-xl shadow-xl bg-white w-full",children:[(0,e.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-lg font-semibold text-primary",children:"Publcation Type"}),(0,e.jsx)("input",{ref:i,type:"text",className:"w-80 outline-none fill-none bg-transparent py-1 px-4 rounded-md border-2 border-gray-400"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-lg font-semibold text-primary",children:"Target reach"}),(0,e.jsx)("input",{onChange:u,value:l,type:"text",className:"w-80 outline-none fill-none bg-transparent py-1 px-4 rounded-md border-2 border-gray-400"})]})]}),(0,e.jsxs)("div",{className:"flex gap-4 flex-wrap mt-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-lg font-semibold text-primary",children:"Publication time"}),(0,e.jsx)("input",{ref:p,type:"time",className:"w-80 outline-none fill-none bg-transparent py-1 px-4 rounded-md border-2 border-gray-400"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-lg font-semibold text-primary",children:"Draft approval deadline"}),(0,e.jsx)("input",{ref:o,type:"date",className:"w-80 outline-none fill-none bg-transparent py-1 px-4 rounded-md border-2 border-gray-400"})]})]}),(0,e.jsx)("div",{}),r==""||r==null||r==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:r}),m==""||m==null||m==null?null:(0,e.jsx)("div",{className:"bg-green-500 bg-opacity-10 border-2 text-center border-green-500 rounded-md text-green-500 text-md font-normal text-md my-4",children:m}),(0,e.jsx)("button",{onClick:g,className:"mt-4 text-md w-80 text-black font-semibold bg-[#fbca8e] rounded-md shadow-lg py-1",children:"Submit"})]})})};export{M as default};
