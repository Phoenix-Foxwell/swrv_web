import{a as H}from"/build/_shared/chunk-JR6ZSNAI.js";import{a as q}from"/build/_shared/chunk-NJKAJ7NJ.js";import{J as I,Z as D,a as h}from"/build/_shared/chunk-A6XXWJXG.js";import{l as U}from"/build/_shared/chunk-P4VL4XDR.js";import{a as x,b as g}from"/build/_shared/chunk-WLYSEPGK.js";import{e as F,g as L,h as E}from"/build/_shared/chunk-EUC6ZTEW.js";var a=F(L());var e=F(E()),M=new H("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",{apiVersion:"2022-11-15"});var B=()=>{let n=U(),m=n.brandId,l=n.campaignId,y=n.userId,f=n.draftId,b=n.cpp,c=n.currency,d=n.name,[u,p]=(0,a.useState)(!1),[o,s]=(0,a.useState)(0),[i,v]=(0,a.useState)(""),w=async()=>{let t={search:{type:"3",campaign:l,brand:m,influencer:y}};(await x({method:"post",url:`${g}/api/search-review`,data:t})).data.data.length>0&&p(!0);let k={search:{status:"3",campaign:l,toUser:y}},N=await x({method:"post",url:`${g}/api/search-draft`,data:k});N.data.status&&v(C=>N.data.data[0])};return(0,a.useEffect)(()=>{w()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"w-full mt-4 shadow-xl bg-white rounded-xl",children:(0,e.jsxs)("div",{className:"flex mx-4 gap-4 flex-wrap py-4",children:[(0,e.jsx)("div",{onClick:()=>{s(0)},children:(0,e.jsx)(q,{text:"Insights",margin:"0",background:`${o==0?"bg-[#01FFF4]":"bg-gray-100"}`,fontwidth:"font-bold",textColor:`${o==0?"text-black":"text-gray-600"}`})}),(0,e.jsx)("div",{onClick:()=>{s(1)},children:(0,e.jsx)(q,{margin:"0",text:"Payments",background:`${o==1?"bg-[#01FFF4]":"bg-gray-100"}`,fontwidth:"font-bold",textColor:`${o==1?"text-black":"text-gray-600"}`})}),(0,e.jsx)("div",{onClick:()=>{s(3)},children:(0,e.jsx)(q,{margin:"0",text:"Schedule",background:`${o==3?"bg-[#01FFF4]":"bg-gray-100"}`,fontwidth:"font-bold",textColor:`${o==3?"text-black":"text-gray-600"}`})})]})}),(0,e.jsxs)("div",{className:"flex flex-wrap gap-6 mt-6",children:[o==0?i==null||i==null||i==""?null:(0,e.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow-lg",children:[(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)("img",{src:i.influencer.pic,alt:"influencer pic",className:"w-10 h-10 shrink-0 rounded-md object-center object-cover"}),(0,e.jsxs)("div",{className:"ml-2",children:[(0,e.jsx)("p",{className:"text-md font-medium",children:i.influencer.name.split("@")[0]}),(0,e.jsx)("p",{className:"text-sm font-medium",children:i.influencer.email})]})]}),(0,e.jsx)("p",{className:"mt-2 text-md font-medium",children:"Description"}),(0,e.jsx)("p",{className:"text-sm font-medium",children:i.description}),(0,e.jsx)("p",{className:"mt-2 text-md font-medium",children:"Handle Info"}),(0,e.jsxs)("div",{className:"flex gap-4",children:[(0,e.jsx)("img",{src:i.handle.platform.logo,alt:"platform",className:"w-14 h-14 shrink-0 rounded-md object-fill object-center"}),(0,e.jsx)("p",{className:"text-xl font-semibold text-center",children:i.handle.name})]}),(0,e.jsx)("p",{className:"mt-2 text-md font-medium",children:"Attachment"}),(0,e.jsx)("a",{target:"_blank",className:"mt-2 text-sm font-normal border-2 border-blue-500 inline-block my-2 py-1 px-4  text-blue-500 hover:text-white hover:bg-blue-500 w-full text-center",href:i.attach01,children:"View Doc"}),(0,e.jsx)("a",{target:"_blank",className:"w-full mt-2 text-sm font-normal border-2 border-blue-500 inline-block my-2 py-1 px-4  text-blue-500 hover:text-white hover:bg-blue-500 text-center",href:i.linkCampaign,children:"View Insights"})]}):(0,e.jsx)(e.Fragment,{}),o==1?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(G,{userid:y,campaingid:l,currency:c,draft:f})}):(0,e.jsx)(e.Fragment,{}),o==3?(0,e.jsx)(W,{draftid:f}):(0,e.jsx)(e.Fragment,{})]})]})},V=B,G=n=>{let[m,l]=(0,a.useState)([]),[y,f]=(0,a.useState)(!1),[b,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),[p,o]=(0,a.useState)(null),s=async()=>{let t={search:{campaigndraft:n.draft,campaign:n.campaingid,influencer:n.userid}},r=await x.post(`${g}/api/get-req-pay`,t);r.data.status==!0&&l(r.data.data)};(0,a.useEffect)(()=>{s()},[]);let i=async()=>{let t={id:p,status:"2",refNo:`${new Date().toLocaleDateString()}_${n.userid}_${n.campaingid}`},r=await x.post(`${g}/api/update-payment`,t);if(r.data.staus==!1)return u(r.data.message);f(!1),window.location.reload()},v=async()=>{let t={id:p,status:"3"},r=await x.post(`${g}/api/update-payment`,t);if(r.data.staus==!1)return u(r.data.message);c(!1),window.location.reload()},w=async()=>{let t=await M.checkout.sessions.create({payment_method_types:["card"],mode:"payment",line_items:[{price_data:{currency:"USD",product_data:{name:"Example Product",images:["https://plus.unsplash.com/premium_photo-1684952849219-5a0d76012ed2?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1032&q=80"]},unit_amount:4200},quantity:1}],success_url:"https://your-website.com/success",cancel_url:"https://your-website.com/cancel"});window.location.assign(t.url==null?"":t.url)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:`fixed top-0 left-0  h-screen w-full bg-slate-900 bg-opacity-10 place-items-center ${y?"grid":"hidden"}`,children:(0,e.jsxs)("div",{className:"bg-white w-72 shadow-lg p-4 rounded-lg",children:[(0,e.jsx)("p",{className:"text-center font-medium text-2xl",children:"Accept"}),(0,e.jsx)("div",{className:"w-full bg-gray-400 h-[1px] my-2"}),(0,e.jsx)("p",{className:"text-center font-medium text-gray-800",children:"Are you sure you want to accept this payment?"}),d==""||d==null||d==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:d}),(0,e.jsxs)("div",{className:"flex mt-2",children:[(0,e.jsxs)("button",{onClick:()=>{f(!1)},className:"bg-white rounded-xl text-red-500 font-normal border-2 border-red-500 py-1 px-2 w-28 hover:text-white hover:bg-red-500",children:[(0,e.jsx)(h,{className:"mx-2",icon:I}),"Cancel"]}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsxs)("button",{onClick:w,className:"bg-white rounded-xl text-green-500 font-normal border-2 border-green-500 py-1 px-2 w-28 hover:text-white hover:bg-green-500",children:[(0,e.jsx)(h,{className:"mx-2",icon:D}),"Accept"]})]})]})}),(0,e.jsx)("div",{className:`fixed top-0 left-0  h-screen w-full bg-slate-900 bg-opacity-10 place-items-center ${b?"grid":"hidden"}`,children:(0,e.jsxs)("div",{className:"bg-white w-72 shadow-lg p-4 rounded-lg",children:[(0,e.jsx)("p",{className:"text-center font-medium text-2xl",children:"Reject"}),(0,e.jsx)("p",{className:"text-center font-medium text-gray-800",children:"Are you sure you want to reject this payment?"}),d==""||d==null||d==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:d}),(0,e.jsxs)("div",{className:"flex mt-2",children:[(0,e.jsxs)("button",{onClick:()=>{c(!1)},className:"bg-white rounded-xl text-red-500 font-normal border-2 border-red-500 py-1 px-2 w-28 hover:text-white hover:bg-red-500",children:[(0,e.jsx)(h,{className:"mx-2",icon:I}),"Cancel"]}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsxs)("button",{onClick:v,className:"bg-white rounded-xl text-green-500 font-normal border-2 border-green-500 py-1 px-2 w-28 hover:text-white hover:bg-green-500",children:[(0,e.jsx)(h,{className:"mx-2",icon:D}),"Reject"]})]})]})}),(0,e.jsx)("div",{className:"p-4 rounded-xl shadow-xl bg-white w-full",children:m.length==0?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{children:"No payment request is pending"})}):(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-md font-medium",children:"Requested Payment"}),(0,e.jsx)("div",{className:"w-full bg-gray-400 h-[1px] my-2"}),(0,e.jsx)("div",{className:"flex flex-wrap gap-6",children:m.map((t,r)=>(0,e.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow-lg w-72",children:[(0,e.jsx)("p",{className:"mt-2 text-md font-medium",children:"Requested by"}),(0,e.jsx)("div",{className:"w-full h-[2px] bg-gray-700"}),(0,e.jsxs)("div",{className:"flex mt-4",children:[(0,e.jsx)("img",{src:t.influencer.pic,alt:"influencer pic",className:"w-10 h-10 shrink-0 rounded-md object-center object-cover"}),(0,e.jsxs)("div",{className:"ml-2",children:[(0,e.jsx)("p",{className:"text-md font-medium",children:t.influencer.name.split("@")[0]}),(0,e.jsx)("p",{className:"text-sm font-medium",children:t.influencer.email})]})]}),(0,e.jsx)("p",{className:"mt-2 text-md font-medium",children:"Amount"}),(0,e.jsxs)("p",{className:"text-sm font-medium",children:[t.amount.toString().split(".")[0]," ",n.currency]}),parseInt(t.status.code)==2?(0,e.jsx)("p",{className:"py-1 px-4 text-center text-white bg-green-500 rounded-md my-2",children:"Accepted"}):parseInt(t.status.code)==3?(0,e.jsx)("p",{className:"py-1 px-4 text-center text-white bg-red-500 rounded-md my-2",children:"Rejected"}):(0,e.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,e.jsxs)("button",{onClick:()=>{o(t.id),f(!0)},className:"bg-white  text-green-500 font-normal border-2 border-green-500 py-1 px-2 w-28 hover:text-white hover:bg-green-500",children:[(0,e.jsx)(h,{className:"mx-2",icon:D}),"Accept"]}),(0,e.jsxs)("button",{onClick:()=>{o(t.id),c(!0)},className:"bg-white  text-red-500 font-normal border-2 border-red-500 py-1 px-2 w-28 hover:text-white hover:bg-red-500",children:[(0,e.jsx)(h,{className:"mx-2",icon:I}),"Reject"]})]})]},r))})]})})]})},W=n=>{let m=(0,a.useRef)(null),[l,y]=(0,a.useState)(),f=t=>{y(t.target.value.replace(/\D/g,""))},b=(0,a.useRef)(null),c=(0,a.useRef)(null),[d,u]=(0,a.useState)(null),[p,o]=(0,a.useState)(null),[s,i]=(0,a.useState)(null),v=async()=>{let t={search:{id:n.draftid}},r=await x.post(`${g}/api/search-draft`,t);r.data.status==!0&&i(r.data.data[0])};(0,a.useEffect)(()=>{v()},[]);let w=async()=>{var t,r,k,N,C,_,P,S,R,A,j,$;if(u(null),((t=m.current)==null?void 0:t.value)==null||((r=m.current)==null?void 0:r.value)==null||((k=m.current)==null?void 0:k.value)=="")u("Fill the publication type");else if(l==null||l==null||l==0)u("Fill the target reach");else if(((N=b.current)==null?void 0:N.value)==null||((C=b.current)==null?void 0:C.value)==null||((_=b.current)==null?void 0:_.value)=="")u("Fill the Publication time");else if(((P=c.current)==null?void 0:P.value)==null||((S=c.current)==null?void 0:S.value)==null||((R=c.current)==null?void 0:R.value)=="")u("Fill the publication date");else{let T=await x.post(`${g}/api/update-draft`,{id:n.draftid,publication_type:(A=m.current)==null?void 0:A.value,target_react:l,publication_time:(j=b.current)==null?void 0:j.value,draft_approval:($=c.current)==null?void 0:$.value});T.data.status?(o("Schedule is updated."),window.location.reload()):u(T.data.message)}};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"p-4 rounded-xl shadow-xl bg-white w-full",children:s==null||s==null||s==""?null:s.draft_approval==null||s.draft_approval==null?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-lg font-semibold text-primary",children:"Publication Type"}),(0,e.jsx)("input",{ref:m,type:"text",className:"w-80 outline-none fill-none bg-transparent py-1 px-4 rounded-md border-2 border-gray-400"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-lg font-semibold text-primary",children:"Target reach"}),(0,e.jsx)("input",{onChange:f,value:l,type:"text",className:"w-80 outline-none fill-none bg-transparent py-1 px-4 rounded-md border-2 border-gray-400"})]})]}),(0,e.jsxs)("div",{className:"flex gap-4 flex-wrap mt-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-lg font-semibold text-primary",children:"Publication time"}),(0,e.jsx)("input",{ref:b,type:"time",className:"w-80 outline-none fill-none bg-transparent py-1 px-4 rounded-md border-2 border-gray-400"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-lg font-semibold text-primary",children:"Publication Date"}),(0,e.jsx)("input",{ref:c,type:"date",className:"w-80 outline-none fill-none bg-transparent py-1 px-4 rounded-md border-2 border-gray-400"})]})]}),d==""||d==null||d==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:d}),p==""||p==null||p==null?null:(0,e.jsx)("div",{className:"bg-green-500 bg-opacity-10 border-2 text-center border-green-500 rounded-md text-green-500 text-md font-normal text-md my-4",children:p}),(0,e.jsx)("button",{onClick:w,className:"mt-4 text-md w-80 text-black font-semibold bg-[#fbca8e] rounded-md shadow-lg py-1",children:"Submit"})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"flex gap-4 flex-wrap",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-lg font-semibold text-primary",children:"Publication Type"}),(0,e.jsx)("p",{className:"text-md font-semibold text-black",children:s.publication_type})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-lg font-semibold text-primary",children:"Target reach"}),(0,e.jsx)("p",{className:"text-md font-semibold text-black",children:s.target_react})]})]}),(0,e.jsxs)("div",{className:"flex gap-4 flex-wrap mt-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-lg font-semibold text-primary",children:"Publication time"}),(0,e.jsx)("p",{className:"text-md font-semibold text-black",children:s.publication_time})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-lg font-semibold text-primary",children:"Publication Date"}),(0,e.jsx)("p",{className:"text-md font-semibold text-black",children:s.draft_approval})]})]})]})})})};export{V as default};
