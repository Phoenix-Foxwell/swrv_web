import{a as s}from"/build/_shared/chunk-5VZ5YK5L.js";import{a as b}from"/build/_shared/chunk-NJKAJ7NJ.js";import"/build/_shared/chunk-5ROUF77C.js";import{b as Z,l as v}from"/build/_shared/chunk-P4VL4XDR.js";import{a as g,b as y}from"/build/_shared/chunk-WLYSEPGK.js";import{e as x,g as ge,h as ee}from"/build/_shared/chunk-EUC6ZTEW.js";var a=x(ge());var e=x(ee());var xe=()=>{let[te,h]=(0,a.useState)(!1),w=v(),N=w.userdata.id,E=w.userdata.brandId,ae=["Post","Story","Reel","Video","Audio"],C=v(),A=Z(),k=s(t=>t.campaignTypeId),[r,n]=(0,a.useState)(null),c=s(t=>t.platform),ne=s(t=>t.setPlatform),p=s(t=>t.media),re=s(t=>t.setMedia),l=(0,a.useRef)(null),u=(0,a.useRef)(null),d=(0,a.useRef)(null),i=(0,a.useRef)(null),[I,le]=(0,a.useState)(""),[S,oe]=(0,a.useState)(""),[T,se]=(0,a.useState)(""),de=s(t=>t.campaignTypeId),m=(0,a.useRef)(null),[L,ie]=(0,a.useState)("");return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:`h-screen w-full grid place-items-center bg-black bg-opacity-25 fixed top-0 left-0 ${te?"grid":"hidden"}`,children:(0,e.jsxs)("div",{className:"w-80 bg-white rounded-xl shadow-xl p-4",children:[(0,e.jsx)("h1",{className:"text-center text-xl font-semibold",children:"Are you sure you want to go back."}),(0,e.jsxs)("div",{className:"flex justify-around",children:[(0,e.jsx)("button",{onClick:()=>{A(-1)},className:"bg-green-500 py-2 px-4 text-xl font-medium rounded-md text-white",children:"Yes"}),(0,e.jsx)("button",{onClick:()=>h(!1),className:"bg-red-500 py-2 px-4 text-xl font-medium rounded-md text-white",children:"NO"})]})]})}),(0,e.jsxs)("div",{className:"flex gap-x-4 flex-col lg:flex-row",children:[(0,e.jsxs)("div",{className:"bg-white shadow-xl rounded-xl px-8 py-4 mt-4 grow",children:[(0,e.jsx)("h2",{className:"text-black tect-xl font-medium text-left my-4",children:k=="5"?"Single post":"Bidding"}),(0,e.jsx)("div",{className:"flex gap-4 flex-wrap",children:C.platform.map((t,o)=>(0,e.jsx)("div",{className:` p-2 rounded-lg shrink-0 ${c.includes(t.id)?"bg-white shadow-xl ":"bg-gray-200"} `,onClick:()=>{ne(t.id)},children:(0,e.jsx)("img",{src:C.platform[o].platformLogoUrl,alt:"error",className:"w-10 h-10"})},o))}),(0,e.jsx)("div",{className:"flex gap-4 flex-wrap my-6",children:ae.map((t,o)=>(0,e.jsx)("div",{className:`shrink-0 cursor-pointer text-primary text-lg text-center font-normal w-28 py-1  rounded-xl ${t==p?"bg-white shadow-xl":"bg-gray-100"}`,onClick:()=>{re(t)},children:t},o))}),(0,e.jsxs)("h2",{className:"text-primary tect-xl font-medium text-left my-1",children:["Campaign name ",(0,e.jsx)("span",{className:"text-rose-500 text-2xl font-semibold",children:"*"})]}),(0,e.jsx)("input",{ref:l,type:"text",className:"bg-[#EEEEEE]  outline-none border-none focus:border-gray-300 rounded-md w-full p-2",onChange:t=>se(t.target.value)}),(0,e.jsxs)("h2",{className:"text-primary tect-xl font-medium text-left my-1",children:["Campaign info ",(0,e.jsx)("span",{className:"text-rose-500 text-2xl font-semibold",children:"*"})]}),(0,e.jsx)("textarea",{ref:u,className:"p-4 w-full h-40 outline-none bg-[#EEEEEE] focus:border-gray-300 rounded-md resize-none"}),(0,e.jsxs)("div",{className:"flex flex-col lg:flex-row",children:[(0,e.jsxs)("div",{className:"grow",children:[(0,e.jsxs)("h2",{className:"text-primary tect-xl font-medium text-left my-1",children:["Start date ",(0,e.jsx)("span",{className:"text-rose-500 text-2xl font-semibold",children:"*"})]}),(0,e.jsx)("input",{type:"date",ref:d,className:"bg-[#EEEEEE] outline-none border-none rounded-lg focus:border-gray-300 w-full p-2",onChange:t=>le(t.target.value)})]}),(0,e.jsx)("div",{className:"w-8"}),(0,e.jsxs)("div",{className:"grow",children:[(0,e.jsxs)("h2",{className:"text-primary tect-xl font-medium text-left my-1",children:["End date ",(0,e.jsx)("span",{className:"text-rose-500 text-2xl font-semibold",children:"*"})]}),(0,e.jsx)("input",{ref:i,type:"date",className:"bg-[#EEEEEE]  outline-none border-none focus:border-gray-300 rounded-md w-full p-2",onChange:t=>oe(t.target.value)})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("h2",{className:"text-primary tect-xl font-medium text-left my-1",children:["Cost per post ",(0,e.jsx)("span",{className:"text-rose-500 text-2xl font-semibold",children:"*"})]}),(0,e.jsx)("input",{ref:m,type:"number",className:"bg-[#EEEEEE]  outline-none border-none focus:border-gray-300 rounded-md w-full p-2",onChange:t=>ie(t.target.value)})]}),r==""||r==null||r==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:r})]}),(0,e.jsx)("div",{children:(0,e.jsxs)("div",{className:"lg:w-80 bg-white  shadow-lx rounded-xl p-4 mt-4",children:[(0,e.jsx)("h1",{className:"text-primary text-lg font-medium",children:"Campaign Summary"}),(0,e.jsxs)("div",{className:"flex my-4",children:[(0,e.jsx)("p",{className:"text-sm text-primary font-normal",children:"Campaign name"}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsx)("p",{className:"text-sm text-primary font-medium",children:T==""?"--------":T})]}),(0,e.jsxs)("div",{className:"flex my-4",children:[(0,e.jsx)("p",{className:"text-sm text-primary font-normal",children:"Cost per post"}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsx)("p",{className:"text-sm text-primary font-medium",children:L==""?"--------":L})]}),k=="6"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"flex my-4",children:[(0,e.jsx)("p",{className:"text-sm text-primary font-normal",children:"Start date"}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsx)("p",{className:"text-sm text-primary font-medium",children:I==""?"--------":new Date(I).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})})]}),(0,e.jsxs)("div",{className:"flex my-4",children:[(0,e.jsx)("p",{className:"text-sm text-primary font-normal",children:"End date"}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsx)("p",{className:"text-sm text-primary font-medium",children:S==""?"--------":new Date(S).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})})]})]}):null,r==""||r==null||r==null?null:(0,e.jsx)("div",{className:"my-4 bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-xl text-red-500 text-md font-normal text-md",children:r}),(0,e.jsxs)("div",{className:"flex w-full",children:[(0,e.jsx)("div",{onClick:()=>{h(!1)},className:"w-full",children:(0,e.jsx)(b,{text:"Back",textColor:"text-black",background:"bg-gray-100",width:"w-full",fontwidth:"font-bold"})}),(0,e.jsx)("div",{className:"w-10"}),(0,e.jsx)("div",{className:"w-full",onClick:async()=>{var t,o,B,P,D,M,H,R,O,$,U,j,X,q,F,z,V,Y,_,G,J,K,Q;if(c==null||c.length==0||c==null)n("Select a platform");else if(p==null||p==""||p==null)n("Select a media");else if(((t=l.current)==null?void 0:t.value)==null||((o=l.current)==null?void 0:o.value)==null||((B=l.current)==null?void 0:B.value)=="")n("Enter campaign name");else if(((P=l.current)==null?void 0:P.value.length)<4)n("Campaign should be more then 3 character.");else if(((D=u.current)==null?void 0:D.value)==null||((M=u.current)==null?void 0:M.value)==null||((H=u.current)==null?void 0:H.value)=="")n("Add campaign info");else if(((R=m.current)==null?void 0:R.value)==null||((O=m.current)==null?void 0:O.value)==null||(($=m.current)==null?void 0:$.value)=="")n("Fill the cost per post");else{let me=new Date(d.current.value),ce=new Date(i.current.value),ue=me>ce;if(((U=d.current)==null?void 0:U.value)==null||((j=d.current)==null?void 0:j.value)==null||((X=d.current)==null?void 0:X.value)=="")n("Enter planed starting date");else if(ue)n("Start date should be less then end date");else if(((q=i.current)==null?void 0:q.value)==null||((F=i.current)==null?void 0:F.value)==null||((z=i.current)==null?void 0:z.value)=="")n("Enter planed end date");else{let pe={userId:N,brandUserId:N,brandId:E,cityId:"0",currencyId:"3",categories:"0",minEligibleRating:"0",maxEligibleRating:"0",minReach:"0",maxReach:"0",costPerPost:(V=m.current)==null?void 0:V.value,totalBudget:"0",dos:"0",donts:"0",mentions:"0",hashtags:"0",campaignTypeId:de,campaignName:(Y=l.current)==null?void 0:Y.value,campaignInfo:(_=u.current)==null?void 0:_.value,platforms:c.join(),startAt:(G=d.current)==null?void 0:G.value,endAt:(J=i.current)==null?void 0:J.value,totalParticipants:100},f=await g({method:"post",url:`${y}/api/add-campaign`,data:pe,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Options":"*","Access-Control-Allow-Methods":"*","X-Content-Type-Options":"*","Content-Type":"application/json",Accept:"*"}});if(f.data.status==!1)n(f.data.message);else{let fe={brandId:E,campaignId:f.data.data.campaign.id,remark:"init bid",bidamount:(K=m.current)==null?void 0:K.value},W=await g({method:"post",url:`${y}/api/add-bid`,data:fe,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Options":"*","Access-Control-Allow-Methods":"*","X-Content-Type-Options":"*","Content-Type":"application/json",Accept:"*"}});if(W.data.status==!1)n(W.data.message);else return await g({method:"post",url:"http://bluelemontech.in:5563/notification/send",data:{title:"New Campaign Created",body:(Q=l.current)==null?void 0:Q.value,to:"/topics/influencer"}}),A(`/home/createcampaign/inviteinf/${f.data.data.campaign.id}`)}}}},children:(0,e.jsx)(b,{text:"Create",textColor:"text-white",background:"bg-primary",width:"w-full"})})]})]})})]})]})},ve=xe;export{ve as default};
