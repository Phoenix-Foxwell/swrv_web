import{a as k}from"/build/_shared/chunk-HA3UGYQD.js";import"/build/_shared/chunk-VLGHPF27.js";import{a as N}from"/build/_shared/chunk-NJKAJ7NJ.js";import{a as x,b as v}from"/build/_shared/chunk-WI5Z27OJ.js";import{G as S,a as R}from"/build/_shared/chunk-6AVPJ36M.js";import{l as q}from"/build/_shared/chunk-P4VL4XDR.js";import{e as P,g as T,h as F}from"/build/_shared/chunk-EUC6ZTEW.js";var a=P(T());var e=P(F());var D=()=>{let t=q(),d=t.brandId,i=t.campaignId,r=t.userId,l=t.draftId,n=t.cpp,o=t.currency,g=t.name,[f,p]=(0,a.useState)(!1),[s,m]=(0,a.useState)(0),y=async()=>{let b={search:{type:"3",campaign:i,brand:d,influencer:r}};(await x({method:"post",url:`${v}/api/search-review`,data:b})).data.data.length>0&&p(!0)};return(0,a.useEffect)(()=>{y()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"w-full mt-4 shadow-xl bg-white rounded-xl",children:(0,e.jsxs)("div",{className:"flex mx-4 gap-4",children:[(0,e.jsx)("div",{onClick:()=>{m(0)},children:(0,e.jsx)(N,{text:"Insights",background:`${s==0?"bg-[#01FFF4]":"bg-gray-100"}`,fontwidth:"font-bold",textColor:`${s==0?"text-black":"text-gray-600"}`})}),(0,e.jsx)("div",{onClick:()=>{m(1)},children:(0,e.jsx)(N,{text:"Payments",background:`${s==1?"bg-[#01FFF4]":"bg-gray-100"}`,fontwidth:"font-bold",textColor:`${s==1?"text-black":"text-gray-600"}`})})]})}),(0,e.jsxs)("div",{className:"flex flex-wrap gap-6 mt-6",children:[s==0?(0,e.jsx)("div",{}):(0,e.jsx)(e.Fragment,{}),s==1?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)($,{brandId:d,userId:r,campaignId:i,draftId:l,cpp:n,currency:o,campname:g}),f?null:(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-md text-primary font-semibold py-1",children:"Rating"}),(0,e.jsx)("div",{className:"w-full h-[1px] bg-slate-300"}),(0,e.jsx)(k,{campaignId:i,brandId:d,influencerId:r,reviewType:"3"})]}),(0,e.jsx)(B,{brandId:d,userId:r,campaignId:i})]}):(0,e.jsx)(e.Fragment,{})]})]})},E=D,$=t=>{let[d,i]=(0,a.useState)(!1),[r,l]=(0,a.useState)(""),n=(0,a.useRef)(null),[o,g]=(0,a.useState)(0),[f,p]=(0,a.useState)(0),[s,m]=(0,a.useState)(null),y=async()=>{let c=await x.post(`${v}/api/get-received-payment`,{userId:t.userId,draftId:t.draftId});c.data.status?g(parseInt(c.data.data.totalAmtReq.toString().split(".")[0])):g(0);let u=await x.post(`${v}/api/get-pending-payment`,{userId:t.userId,draftId:t.draftId});u.data.status?p(parseInt(u.data.data.totalAmtReq.toString().split(".")[0])):p(0)};(0,a.useEffect)(()=>{y()},[]);let b=async()=>{var c,u,I,h,w;if(l(""),m(null),((c=n.current)==null?void 0:c.value)==null||((u=n.current)==null?void 0:u.value)==null||((I=n.current)==null?void 0:I.value)=="")l("Enter the amount");else if(parseInt((h=n.current)==null?void 0:h.value)>parseInt(t.cpp)-f)l("Your requested is higher then pending amount.");else{let A={userId:t.userId,campaignId:t.campaignId,amtReq:(w=n.current)==null?void 0:w.value,draftId:t.draftId,brandId:t.brandId,paymentType:"1"},C=await x.post(`${v}/api/new-pay-request`,A);C.data.status?(l(""),n.current.value="",m("Payment Request Sent Successfully"),setTimeout(()=>{window.location.reload()},2e3)):l(C.data.message),i(!1)}};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-md text-primary font-semibold py-1",children:"Payments"}),(0,e.jsx)("div",{className:"w-full h-[1px] bg-slate-300"}),(0,e.jsxs)("div",{className:"rounded-xl shadow-xl bg-white p-4 mt-2 w-96",children:[(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)(R,{icon:S,className:"text-xl text-primary"}),(0,e.jsx)("h2",{className:"text-xl text-primary font-medium px-4",children:"Budget"}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsxs)("p",{className:"text-md font-bold text-black",children:[t.cpp.toString().split(".")[0]," ",t.currency]})]}),(0,e.jsx)("div",{className:"h-[1px] bg-gray-500 w-full my-2 "}),(0,e.jsxs)("div",{className:"flex my-2",children:[(0,e.jsx)("p",{className:"text-md text-primary",children:"Received"}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsxs)("p",{className:"text-md font-normal text-black",children:[o," ",t.currency]})]}),(0,e.jsxs)("div",{className:"flex my-2",children:[(0,e.jsx)("p",{className:"text-md text-primary",children:"Pending"}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsxs)("p",{className:"text-md font-normal text-black",children:[parseInt(t.cpp.toString().split(".")[0])-o," ",t.currency]})]})]}),(0,e.jsxs)("div",{className:"p-4 bg-white mt-2 rounded-md w-96",children:[(0,e.jsx)("p",{className:"text-normal font-semibold py-1 text-primary text-lg",children:"Payment request"}),(0,e.jsx)("button",{onClick:()=>{i(!0)},className:`text-black bg-[#01FFF4] rounded-lg w-full text-center py-2 font-semibold text-md mt-2 ${d?"hidden":""}`,children:"Request"}),(0,e.jsxs)("div",{className:`${d?"":"hidden"}`,children:[(0,e.jsxs)("div",{className:"flex gap-x-4",children:[(0,e.jsx)("p",{children:"Enter Amount : "})," ",(0,e.jsx)("div",{children:(0,e.jsx)("input",{ref:n,type:"number",className:"text-black outline-none border-none rounded-md py-1 px-2 bg-gray-300 w-full"})})]}),r==""||r==null||r==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:r}),(0,e.jsx)("button",{onClick:b,className:"text-black bg-[#01FFF4] rounded-lg w-full text-center py-2 font-semibold text-md mt-2",children:"Request Payment"})]}),s==""||s==null||s==null?null:(0,e.jsx)("div",{className:"bg-green-500 bg-opacity-10 border-2 text-center border-green-500 rounded-md text-green-500 text-md font-normal text-md my-4",children:s})]})]})})},B=t=>{let[d,i]=(0,a.useState)(null),[r,l]=(0,a.useState)(null),n=(0,a.useRef)(null),o=(0,a.useRef)(null),g=async()=>{var f,p,s,m,y,b,c,u,I;if(((f=n.current)==null?void 0:f.value)==null||((p=n.current)==null?void 0:p.value)==null||((s=n.current)==null?void 0:s.value)=="")i("Fill the message.");else if(((m=o.current)==null?void 0:m.value)==null||((y=o.current)==null?void 0:y.value)==null||((b=o.current)==null?void 0:b.value)==""||((c=o.current)==null?void 0:c.value)=="0")i("Select one reason.");else{let h={type:(u=o.current)==null?void 0:u.value,userId:t.userId,brandId:t.brandId,campaignId:t.campaignId,isBrand:0,message:(I=n.current)==null?void 0:I.value},w=await x({method:"post",url:`${v}/api/add-dispute`,data:h,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Options":"*","Access-Control-Allow-Methods":"*","X-Content-Type-Options":"*","Content-Type":"application/json",Accept:"*"}});if(w.data.status==!1)return i(w.data.message);i(null),l("Message sent!"),o.current.value="",n.current.value=""}};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-md text-primary font-semibold py-1",children:"Dispute"}),(0,e.jsx)("div",{className:"w-full h-[1px] bg-slate-300"}),(0,e.jsxs)("div",{className:"rounded-xl shadow-xl bg-white p-4 mt-2 w-96",children:[(0,e.jsxs)("select",{ref:o,name:"reason",id:"reason",className:"w-full rounded-md border-none outline-none bg-gray-100 py-2 my-2 px-2",children:[(0,e.jsx)("option",{value:"1",children:"This is bad"}),(0,e.jsx)("option",{value:"2",children:"This is so bad"}),(0,e.jsx)("option",{value:"3",children:"This is extrimily bad"}),(0,e.jsx)("option",{value:"4",children:"I just don't want it"})]}),(0,e.jsx)("textarea",{ref:n,className:"p-4 w-full h-40 outline-none border-2 border-gray-300 focus:border-gray-300 rounded-md resize-none",placeholder:"Your message"}),d==""||d==null||d==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:d}),r==""||r==null||r==null?null:(0,e.jsx)("div",{className:"bg-green-500 bg-opacity-10 border-2 text-center border-green-500 rounded-md text-green-500 text-md font-normal text-md my-4",children:r}),(0,e.jsx)("div",{onClick:g,children:(0,e.jsx)(N,{text:"Send Message",background:"bg-primary"})})]})]})})};export{E as default};
