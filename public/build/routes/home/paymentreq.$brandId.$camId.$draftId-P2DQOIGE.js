import{a as A}from"/build/_shared/chunk-XB4XAECX.js";import"/build/_shared/chunk-VLGHPF27.js";import{a as N}from"/build/_shared/chunk-NJKAJ7NJ.js";import{G as R,a as F}from"/build/_shared/chunk-A6XXWJXG.js";import{l as q}from"/build/_shared/chunk-P4VL4XDR.js";import{a as b,b as x}from"/build/_shared/chunk-WLYSEPGK.js";import{e as k,g as D,h as S}from"/build/_shared/chunk-EUC6ZTEW.js";var a=k(D());var e=k(S());var T=()=>{let t=q(),l=t.brandId,i=t.campaignId,r=t.userId,u=t.draftId,n=t.cpp,o=t.currency,v=t.name,[y,f]=(0,a.useState)(!1),[d,p]=(0,a.useState)(0),[s,I]=(0,a.useState)(""),m=async()=>{let c={search:{type:"3",campaign:i,brand:l,influencer:r}};(await b({method:"post",url:`${x}/api/search-review`,data:c})).data.data.length>0&&f(!0);let w={search:{status:"3",campaign:i,toUser:r}},g=await b({method:"post",url:`${x}/api/search-draft`,data:w});g.data.status&&I(C=>g.data.data[0])};return(0,a.useEffect)(()=>{m()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"w-full mt-4 shadow-xl bg-white rounded-xl",children:(0,e.jsxs)("div",{className:"flex mx-4 gap-4",children:[(0,e.jsx)("div",{onClick:()=>{p(0)},children:(0,e.jsx)(N,{text:"Insights",background:`${d==0?"bg-[#01FFF4]":"bg-gray-100"}`,fontwidth:"font-bold",textColor:`${d==0?"text-black":"text-gray-600"}`})}),(0,e.jsx)("div",{onClick:()=>{p(1)},children:(0,e.jsx)(N,{text:"Payments",background:`${d==1?"bg-[#01FFF4]":"bg-gray-100"}`,fontwidth:"font-bold",textColor:`${d==1?"text-black":"text-gray-600"}`})})]})}),(0,e.jsxs)("div",{className:"flex flex-wrap gap-6 mt-6",children:[d==0?s==null||s==null||s==""?null:(0,e.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow-lg",children:[(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)("img",{src:s.influencer.pic,alt:"influencer pic",className:"w-10 h-10 shrink-0 rounded-md object-center object-cover"}),(0,e.jsxs)("div",{className:"ml-2",children:[(0,e.jsx)("p",{className:"text-md font-medium",children:s.influencer.name.split("@")[0]}),(0,e.jsx)("p",{className:"text-sm font-medium",children:s.influencer.email})]})]}),(0,e.jsx)("p",{className:"mt-2 text-md font-medium",children:"Description"}),(0,e.jsx)("p",{className:"text-sm font-medium",children:s.description}),(0,e.jsx)("p",{className:"mt-2 text-md font-medium",children:"Handle Info"}),(0,e.jsxs)("div",{className:"flex gap-4",children:[(0,e.jsx)("img",{src:s.handle.platform.logo,alt:"platform",className:"w-14 h-14 shrink-0 rounded-md object-fill object-center"}),(0,e.jsx)("p",{className:"text-xl font-semibold text-center",children:s.handle.name})]}),(0,e.jsx)("p",{className:"mt-2 text-md font-medium",children:"Attachment"}),(0,e.jsx)("a",{target:"_blank",className:"mt-2 text-sm font-normal border-2 border-blue-500 inline-block my-2 py-1 px-4  text-blue-500 hover:text-white hover:bg-blue-500 w-full text-center",href:s.attach01,children:"View Doc"}),(0,e.jsx)("a",{target:"_blank",className:"w-full mt-2 text-sm font-normal border-2 border-blue-500 inline-block my-2 py-1 px-4  text-blue-500 hover:text-white hover:bg-blue-500 text-center",href:s.linkCampaign,children:"View Insights"})]}):(0,e.jsx)(e.Fragment,{}),d==1?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(E,{brandId:l,userId:r,campaignId:i,draftId:u,cpp:n,currency:o,campname:v}),y?null:(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-md text-primary font-semibold py-1",children:"Rating"}),(0,e.jsx)("div",{className:"w-full h-[1px] bg-slate-300"}),(0,e.jsx)(A,{campaignId:i,brandId:l,influencerId:r,reviewType:"3"})]}),(0,e.jsx)(B,{brandId:l,userId:r,campaignId:i})]}):(0,e.jsx)(e.Fragment,{})]})]})},$=T,E=t=>{let[l,i]=(0,a.useState)(!1),[r,u]=(0,a.useState)(""),n=(0,a.useRef)(null),[o,v]=(0,a.useState)(0),[y,f]=(0,a.useState)(0),[d,p]=(0,a.useState)(null),s=async()=>{let m=await b.post(`${x}/api/get-received-payment`,{userId:t.userId,draftId:t.draftId});m.data.status?v(parseInt(m.data.data.totalAmtReq.toString().split(".")[0])):v(0);let c=await b.post(`${x}/api/get-pending-payment`,{userId:t.userId,draftId:t.draftId});c.data.status?f(parseInt(c.data.data.totalAmtReq.toString().split(".")[0])):f(0)};(0,a.useEffect)(()=>{s()},[]);let I=async()=>{var m,c,h,w,g;if(u(""),p(null),((m=n.current)==null?void 0:m.value)==null||((c=n.current)==null?void 0:c.value)==null||((h=n.current)==null?void 0:h.value)=="")u("Enter the amount");else if(parseInt((w=n.current)==null?void 0:w.value)>parseInt(t.cpp)-y)u("Your requested is higher then pending amount.");else{let C={userId:t.userId,campaignId:t.campaignId,amtReq:(g=n.current)==null?void 0:g.value,draftId:t.draftId,brandId:t.brandId,paymentType:"1"},P=await b.post(`${x}/api/new-pay-request`,C);P.data.status?(u(""),n.current.value="",p("Payment Request Sent Successfully"),setTimeout(()=>{window.location.reload()},2e3)):u(P.data.message),i(!1)}};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-md text-primary font-semibold py-1",children:"Payments"}),(0,e.jsx)("div",{className:"w-full h-[1px] bg-slate-300"}),(0,e.jsxs)("div",{className:"rounded-xl shadow-xl bg-white p-4 mt-2 w-96",children:[(0,e.jsxs)("div",{className:"flex",children:[(0,e.jsx)(F,{icon:R,className:"text-xl text-primary"}),(0,e.jsx)("h2",{className:"text-xl text-primary font-medium px-4",children:"Budget"}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsxs)("p",{className:"text-md font-bold text-black",children:[t.cpp.toString().split(".")[0]," ",t.currency]})]}),(0,e.jsx)("div",{className:"h-[1px] bg-gray-500 w-full my-2 "}),(0,e.jsxs)("div",{className:"flex my-2",children:[(0,e.jsx)("p",{className:"text-md text-primary",children:"Received"}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsxs)("p",{className:"text-md font-normal text-black",children:[o," ",t.currency]})]}),(0,e.jsxs)("div",{className:"flex my-2",children:[(0,e.jsx)("p",{className:"text-md text-primary",children:"Pending"}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsxs)("p",{className:"text-md font-normal text-black",children:[parseInt(t.cpp.toString().split(".")[0])-o," ",t.currency]})]})]}),(0,e.jsxs)("div",{className:"p-4 bg-white mt-2 rounded-md w-96",children:[(0,e.jsx)("p",{className:"text-normal font-semibold py-1 text-primary text-lg",children:"Payment request"}),(0,e.jsx)("button",{onClick:()=>{i(!0)},className:`text-black bg-[#01FFF4] rounded-lg w-full text-center py-2 font-semibold text-md mt-2 ${l?"hidden":""}`,children:"Request"}),(0,e.jsxs)("div",{className:`${l?"":"hidden"}`,children:[(0,e.jsxs)("div",{className:"flex gap-x-4",children:[(0,e.jsx)("p",{children:"Enter Amount : "})," ",(0,e.jsx)("div",{children:(0,e.jsx)("input",{ref:n,type:"number",className:"text-black outline-none border-none rounded-md py-1 px-2 bg-gray-300 w-full"})})]}),r==""||r==null||r==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:r}),(0,e.jsx)("button",{onClick:I,className:"text-black bg-[#01FFF4] rounded-lg w-full text-center py-2 font-semibold text-md mt-2",children:"Request Payment"})]}),d==""||d==null||d==null?null:(0,e.jsx)("div",{className:"bg-green-500 bg-opacity-10 border-2 text-center border-green-500 rounded-md text-green-500 text-md font-normal text-md my-4",children:d})]})]})})},B=t=>{let[l,i]=(0,a.useState)(null),[r,u]=(0,a.useState)(null),n=(0,a.useRef)(null),o=(0,a.useRef)(null),v=async()=>{var y,f,d,p,s,I,m,c,h;if(((y=n.current)==null?void 0:y.value)==null||((f=n.current)==null?void 0:f.value)==null||((d=n.current)==null?void 0:d.value)=="")i("Fill the message.");else if(((p=o.current)==null?void 0:p.value)==null||((s=o.current)==null?void 0:s.value)==null||((I=o.current)==null?void 0:I.value)==""||((m=o.current)==null?void 0:m.value)=="0")i("Select one reason.");else{let w={type:(c=o.current)==null?void 0:c.value,userId:t.userId,brandId:t.brandId,campaignId:t.campaignId,isBrand:0,message:(h=n.current)==null?void 0:h.value},g=await b({method:"post",url:`${x}/api/add-dispute`,data:w,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Options":"*","Access-Control-Allow-Methods":"*","X-Content-Type-Options":"*","Content-Type":"application/json",Accept:"*"}});if(g.data.status==!1)return i(g.data.message);i(null),u("Message sent!"),o.current.value="",n.current.value=""}};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-md text-primary font-semibold py-1",children:"Dispute"}),(0,e.jsx)("div",{className:"w-full h-[1px] bg-slate-300"}),(0,e.jsxs)("div",{className:"rounded-xl shadow-xl bg-white p-4 mt-2 w-96",children:[(0,e.jsxs)("select",{ref:o,name:"reason",id:"reason",className:"w-full rounded-md border-none outline-none bg-gray-100 py-2 my-2 px-2",children:[(0,e.jsx)("option",{value:"1",children:"Product or service issue"}),(0,e.jsx)("option",{value:"2",children:"Billing or payment issue"}),(0,e.jsx)("option",{value:"3",children:"Shipping or delivery issue"}),(0,e.jsx)("option",{value:"4",children:"Customer service issue"}),(0,e.jsx)("option",{value:"5",children:"Website or app issue"}),(0,e.jsx)("option",{value:"6",children:"Other issue"})]}),(0,e.jsx)("textarea",{ref:n,className:"p-4 w-full h-40 outline-none border-2 border-gray-300 focus:border-gray-300 rounded-md resize-none",placeholder:"Your message"}),l==""||l==null||l==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:l}),r==""||r==null||r==null?null:(0,e.jsx)("div",{className:"bg-green-500 bg-opacity-10 border-2 text-center border-green-500 rounded-md text-green-500 text-md font-normal text-md my-4",children:r}),(0,e.jsx)("div",{onClick:v,children:(0,e.jsx)(N,{text:"Send Message",background:"bg-primary"})})]})]})})};export{$ as default};
