import{a as y}from"/build/_shared/chunk-6ONMTUBQ.js";import{a as p,b as g}from"/build/_shared/chunk-MNPIC26H.js";import{E as k,a as F}from"/build/_shared/chunk-VYXQYHL2.js";import{k as w}from"/build/_shared/chunk-WLPYV2BQ.js";import{c as f,d as C,e as h}from"/build/_shared/chunk-7UEYUE33.js";var a=f(C());var t=f(h());var R=()=>{let e=w(),c=e.brandId,l=e.campaignId,d=e.userId,s=e.draftId,n=e.cpp,u=e.currency,[r,i]=(0,a.useState)(0);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-full mt-4 shadow-xl bg-white rounded-xl",children:(0,t.jsxs)("div",{className:"flex mx-4 gap-4",children:[(0,t.jsx)("div",{onClick:()=>{i(0)},children:(0,t.jsx)(y,{text:"Insights",background:`${r==0?"bg-[#01FFF4]":"bg-gray-100"}`,fontwidth:"font-bold",textColor:`${r==0?"text-black":"text-gray-600"}`})}),(0,t.jsx)("div",{onClick:()=>{i(1)},children:(0,t.jsx)(y,{text:"Payments",background:`${r==1?"bg-[#01FFF4]":"bg-gray-100"}`,fontwidth:"font-bold",textColor:`${r==1?"text-black":"text-gray-600"}`})})]})}),(0,t.jsxs)("div",{children:[r==0?(0,t.jsx)("div",{}):(0,t.jsx)(t.Fragment,{}),r==1?(0,t.jsx)(E,{brandId:c,userId:d,campaignId:l,draftId:s,cpp:n,currency:u}):(0,t.jsx)(t.Fragment,{})]})]})},$=R,E=e=>{let[c,l]=(0,a.useState)(!1),[d,s]=(0,a.useState)(""),n=(0,a.useRef)(null),[u,r]=(0,a.useState)(0),[i,x]=(0,a.useState)(0),P=async()=>{let o=await p.post(`${g}/api/get-received-payment`,{userId:e.userId,draftId:e.draftId});o.data.status?r(parseInt(o.data.data.totalAmtReq.toString().split(".")[0])):r(0);let m=await p.post(`${g}/api/get-pending-payment`,{userId:e.userId,draftId:e.draftId});m.data.status?x(parseInt(m.data.data.totalAmtReq.toString().split(".")[0])):x(0)};return(0,a.useEffect)(()=>{P()},[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"grow flex-1",children:[(0,t.jsx)("p",{className:"text-md text-primary font-semibold py-1",children:"Payments"}),(0,t.jsx)("div",{className:"w-full h-[1px] bg-slate-300"}),(0,t.jsxs)("div",{className:"rounded-xl shadow-xl bg-white p-4 mt-2 w-96",children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(F,{icon:k,className:"text-xl text-primary"}),(0,t.jsx)("h2",{className:"text-xl text-primary font-medium px-4",children:"Budget"}),(0,t.jsx)("div",{className:"grow"}),(0,t.jsxs)("p",{className:"text-md font-bold text-black",children:[e.cpp.toString().split(".")[0]," ",e.currency]})]}),(0,t.jsx)("div",{className:"h-[1px] bg-gray-500 w-full my-2 "}),(0,t.jsxs)("div",{className:"flex my-2",children:[(0,t.jsx)("p",{className:"text-md text-primary",children:"Received"}),(0,t.jsx)("div",{className:"grow"}),(0,t.jsxs)("p",{className:"text-md font-normal text-black",children:[u," ",e.currency]})]}),(0,t.jsxs)("div",{className:"flex my-2",children:[(0,t.jsx)("p",{className:"text-md text-primary",children:"Pending"}),(0,t.jsx)("div",{className:"grow"}),(0,t.jsxs)("p",{className:"text-md font-normal text-black",children:[parseInt(e.cpp.toString().split(".")[0])-u," ",e.currency]})]})]}),(0,t.jsxs)("div",{className:"p-4 bg-white mt-2 rounded-md w-96",children:[(0,t.jsx)("p",{className:"text-normal font-semibold py-1 text-primary text-lg",children:"Payment request"}),(0,t.jsx)("button",{onClick:()=>{l(!0)},className:`text-black bg-[#01FFF4] rounded-lg w-full text-center py-2 font-semibold text-md mt-2 ${c?"hidden":""}`,children:"Request"}),(0,t.jsxs)("div",{className:`${c?"":"hidden"}`,children:[(0,t.jsxs)("div",{className:"flex gap-x-4",children:[(0,t.jsx)("p",{children:"Enter Amount : "})," ",(0,t.jsx)("div",{children:(0,t.jsx)("input",{ref:n,type:"number",className:"text-black outline-none border-none rounded-md py-1 px-2 bg-gray-300 w-full"})})]}),d==""||d==null||d==null?null:(0,t.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:d}),(0,t.jsx)("button",{onClick:async()=>{var o,m,v,b,I;if(console.log(i),((o=n.current)==null?void 0:o.value)==null||((m=n.current)==null?void 0:m.value)==null||((v=n.current)==null?void 0:v.value)=="")s("Enter the amount");else if(parseInt((b=n.current)==null?void 0:b.value)>parseInt(e.cpp)-i)s("Your requested is higher then pending amount.");else{let q={userId:e.userId,campaignId:e.campaignId,amtReq:(I=n.current)==null?void 0:I.value,draftId:e.draftId,brandId:e.brandId,paymentType:"1"},N=await p.post(`${g}/api/new-pay-request`,q);if(N.data.status)s(""),n.current.value="";else return s(N.data.message);return l(!1)}},className:"text-black bg-[#01FFF4] rounded-lg w-full text-center py-2 font-semibold text-md mt-2",children:"Request Payment"})]})]})]})})};export{$ as default};
