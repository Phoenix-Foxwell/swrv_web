import{a as H}from"/build/_shared/chunk-XTP3C3EQ.js";import{a as z}from"/build/_shared/chunk-HKPUGHCD.js";import{a as T}from"/build/_shared/chunk-NJKAJ7NJ.js";import{a as F,b as B}from"/build/_shared/chunk-VJBGBMKQ.js";import"/build/_shared/chunk-5ROUF77C.js";import{d as S,l as L}from"/build/_shared/chunk-P4VL4XDR.js";import{e as u,g as $,h as U}from"/build/_shared/chunk-EUC6ZTEW.js";var t=u($());var D=u(z()),e=u(U());var X=()=>{let m=L(),f=m.user.id,M=m.user.brand.id,[i,n]=(0,t.useState)(null),[d,p]=(0,t.useState)(null),O=H(r=>r.setIndex),g=(0,t.useRef)(null),o=(0,t.useRef)(null),a=(0,t.useRef)(null),[s,b]=(0,t.useState)(),R=r=>{b(r.target.value.replace(/\D/g,""))},[c,j]=(0,t.useState)([]),[q,v]=(0,t.useState)(!1);return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"p-8 w-full",children:[(0,e.jsx)("h1",{className:"text-2xl text-black font-bold",children:"Invite users"}),(0,e.jsx)("div",{className:"flex w-full",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:"Username"}),(0,e.jsx)("input",{ref:o,type:"text",className:"bg-[#EEEEEE]  outline-none border-none focus:border-gray-300 rounded-md w-full p-2"}),(0,e.jsx)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:"Email"}),(0,e.jsx)("input",{ref:a,type:"text",className:"bg-[#EEEEEE]  outline-none border-none focus:border-gray-300 rounded-md w-full p-2"}),(0,e.jsx)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:"contact number"}),(0,e.jsx)("input",{onChange:R,value:s,type:"text",maxLength:10,className:"bg-[#EEEEEE]  outline-none border-none focus:border-gray-300 rounded-md w-full p-2"})]}),(0,e.jsxs)("div",{className:"flex my-4",children:[(0,e.jsx)("div",{className:"grow"}),q?(0,e.jsx)("button",{className:"text-white rounded-lg bg-secondary py-1 px-4 font-semibold text-lg",children:"Sending..."}):(0,e.jsx)("button",{onClick:async()=>{var r,l,x,E,y,h,w,N,I,A,C;if(v(!0),n(null),((r=o.current)==null?void 0:r.value)==null||((l=o.current)==null?void 0:l.value)==null||((x=o.current)==null?void 0:x.value)=="")n("Enter the user ");else if(((E=a.current)==null?void 0:E.value)==null||((y=a.current)==null?void 0:y.value)==null||((h=a.current)==null?void 0:h.value)=="")n("Fill the Brand info");else if(!D.validate((w=a.current)==null?void 0:w.value))n("Enter valid email");else if(s==null||s==null||s==0)n("Fill the contact number");else if(s.toString().length!=10)n("Enter a 10 degit valid contact number");else{let P={userId:f,brandId:M,name:(N=o.current)==null?void 0:N.value,email:(I=a.current)==null?void 0:I.value,contact:s},k=await F({method:"post",url:`${B}/api/send-brand-invite`,data:P});if(k.data.status==!1)return n(k.data.message);{let V={name:(A=o.current)==null?void 0:A.value,email:(C=a.current)==null?void 0:C.value,number:s.toString()};return j([...c,V]),n(null),b(0),o.current.value="",a.current.value="",v(!1),p("User invited successfully")}}},className:"text-white rounded-lg bg-secondary py-1 px-4 font-semibold text-lg",children:"Invite"})]}),i==""||i==null||i==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:i}),d==""||d==null||d==null?null:(0,e.jsx)("div",{className:"bg-green-500 bg-opacity-10 border-2 text-center border-green-500 rounded-md text-green-500 text-md font-normal text-md my-4",children:d}),c.map((r,l)=>(0,e.jsx)("div",{className:"my-4 bg-gray-200 shadow-md rounded-md py-1 px-4",children:(0,e.jsxs)("p",{className:"text-slate-900 text-md",children:[l+1,": ",r.name," - ",r.email," "]})},l)),(0,e.jsx)("div",{onClick:()=>{c.length==0?(p(null),n("Invite at least one user")):(O(5),g.current.click())},children:(0,e.jsx)(T,{text:"Next",textColor:"text-white",width:"w-full",background:"bg-primary",fontwidth:"font-bold"})}),(0,e.jsxs)(S,{method:"post",className:"hidden",children:[(0,e.jsx)("input",{type:"hidden",name:"id",value:f.toString()}),(0,e.jsx)("button",{ref:g,name:"submit",children:"Submit"})]})]})})]})})},G=X;export{G as default};
