import{a as D}from"/build/_shared/chunk-XTP3C3EQ.js";import{a as P}from"/build/_shared/chunk-NJKAJ7NJ.js";import"/build/_shared/chunk-5ROUF77C.js";import{O as C,U as H,a as x}from"/build/_shared/chunk-A6XXWJXG.js";import{b as $,d as T,l as M}from"/build/_shared/chunk-P4VL4XDR.js";import{a as w,b as N}from"/build/_shared/chunk-WLYSEPGK.js";import{e as h,g as Z,h as B}from"/build/_shared/chunk-EUC6ZTEW.js";var n=h(Z());var e=h(B());var _=()=>{let y=M(),k=y.user.id,G=y.country,A=["MALE","FEMALE","TRANSGENDER"],E=y.user.role.code=="50",[s,j]=(0,n.useState)([]),[R,u]=(0,n.useState)(!1),[d,S]=(0,n.useState)([]),[X,p]=(0,n.useState)(!1),[f,a]=(0,n.useState)(""),[g,F]=(0,n.useState)(null),[q,i]=(0,n.useState)(!1),[L,z]=(0,n.useState)([]),[r,U]=(0,n.useState)(null),[m,J]=(0,n.useState)(),K=t=>{J(t.target.value.replace(/\D/g,""))},c=(0,n.useRef)(null),Q=async(t,o)=>{let l=await w.post(`${N}/api/get-city`,{search:t,countryId:o});z(l.data.data)},V=D(t=>t.setIndex),te=$(),[v,W]=(0,n.useState)(!1),Y=()=>{W(!v)},I=(0,n.useRef)(null);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:`w-full h-screen bg-black bg-opacity-25 fixed top-0 left-0  place-items-center ${q?"grid":"hidden"}`,onClick:t=>i(!1),children:(0,e.jsx)("div",{className:"bg-white shadow-md w-80 rounded-lg p-4",onClick:t=>t.stopPropagation(),children:L.length==0?(0,e.jsxs)("div",{className:"min-h-96",children:[(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:"No city found with this name"}),(0,e.jsx)("button",{className:"px-2 mx-auto bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4 cursor-pointer",onClick:()=>{i(!1)},children:"Close"})]}):(0,e.jsxs)("div",{className:"h-[350px] overflow-y-scroll no-scrollbar",children:[L.map((t,o)=>(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{onClick:()=>{U(t),i(!1),c.current.value=""},className:"my-6 cursor-pointer bg-white rounded-md py-1 border-2 text-center font-normal text-md hover:border-emerald-500",children:[t.name," - ",t.code]},o)})),(0,e.jsx)("div",{onClick:()=>{i(!1)},className:"my-4 bg-red-500 bg-opacity-10 b-2 border-red-500 px-4 py-1 text-red-500 font-medium text-center cursor-pointer",children:"Close"})]})})}),(0,e.jsx)("div",{className:"p-8 w-full",children:(0,e.jsx)("div",{className:"flex w-full",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsxs)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:["Gender  ",(0,e.jsx)("span",{className:"text-rose-500 text-2xl font-semibold",children:"*"})]}),(0,e.jsxs)("div",{className:"bg-[#EEEEEE] h-10 rounded-lg  flex gap-1 pl-2 w-full",children:[(0,e.jsx)("div",{className:"flex gap-x-2 overflow-x-scroll flex-nowrap no-scrollbar",children:d.map((t,o)=>(0,e.jsx)("div",{className:"flex bg-white my-1 rounded-md py-1 px-2 items-center gap-x-4",children:(0,e.jsx)("h1",{className:" text-black font-semibold text-center w-40",children:t})},o))}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsx)("div",{className:"grid place-items-center px-4 bg-gray-300 rounded-lg",onClick:()=>{p(!0)},children:(0,e.jsx)(x,{icon:C})})]}),(0,e.jsx)("div",{className:`w-full h-screen bg-gray-300 bg-opacity-20 fixed top-0 left-0 ${X?"":"hidden"} grid place-items-center`,onClick:t=>p(!1),children:(0,e.jsxs)("div",{className:"bg-white p-10 cursor-pointer",onClick:t=>t.stopPropagation(),children:[(0,e.jsx)("div",{className:"min-h-80 overflow-y-scroll no-scrollbar w-80",children:A.map((t,o)=>(0,e.jsx)("h1",{onClick:()=>{if(d.includes(t)){let l=d.filter(b=>b!=t);S(l)}else S([t]);p(!1)},className:`text-lg text-center font-normal rounded-md w-full my-2 border-2 ${d.includes(t)?"border-green-500 text-green-500":"border-gray-800 text-black"}  no-scrollbar`,children:t},o))}),(0,e.jsx)("div",{onClick:()=>{p(!1)},className:"my-4 bg-red-500 bg-opacity-10 b-2 border-red-500 px-4 py-1 text-red-500 font-medium text-center cursor-pointer",children:"Close"})]})}),(0,e.jsxs)("p",{className:"text-black text-left font-normal text-lg mt-4",children:["Country  ",(0,e.jsx)("span",{className:"text-rose-500 text-2xl font-semibold",children:"*"})]}),(0,e.jsxs)("div",{className:"bg-[#EEEEEE] h-10 rounded-lg  flex gap-1 pl-2 w-full",children:[(0,e.jsx)("div",{className:"flex gap-x-2 overflow-x-scroll flex-nowrap no-scrollbar",children:s.map((t,o)=>(0,e.jsx)("div",{className:"flex bg-white my-1 rounded-md py-1 px-2 items-center gap-x-4",children:(0,e.jsx)("h1",{className:" text-black font-semibold text-center w-auto",children:`${t.name} - [${t.code}]`})},o))}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsx)("div",{className:"grid place-items-center px-4 bg-gray-300 rounded-lg",onClick:()=>{u(!0)},children:(0,e.jsx)(x,{icon:C})})]}),(0,e.jsx)("div",{className:`w-full h-screen bg-gray-300 bg-opacity-20 fixed top-0 left-0 ${R?"":"hidden"} grid place-items-center`,onClick:t=>u(!1),children:(0,e.jsxs)("div",{className:"bg-white p-10 cursor-pointer",onClick:t=>t.stopPropagation(),children:[(0,e.jsx)("div",{className:"overflow-y-scroll no-scrollbar w-80 h-[350px]",children:G.map((t,o)=>(0,e.jsxs)("h1",{onClick:()=>{j(l=>[t]),u(!1)},className:`text-lg text-center font-normal rounded-md w-full my-2 border-2 ${s.includes(t)?"border-green-500 text-green-500":"border-gray-800 text-black"}  no-scrollbar`,children:[t.code," - ",t.name]},o))}),(0,e.jsx)("div",{onClick:()=>{u(!1)},className:"my-4 bg-red-500 bg-opacity-10 b-2 border-red-500 px-4 py-1 text-red-500 font-medium text-center cursor-pointer",children:"Close"})]})}),(0,e.jsxs)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:["City  ",(0,e.jsx)("span",{className:"text-rose-500 text-2xl font-semibold",children:"*"})]}),(0,e.jsxs)("div",{className:"w-full bg-[#EEEEEE] rounded-md flex p-2",children:[(0,e.jsx)("div",{className:"grow",children:(0,e.jsx)("input",{ref:c,className:"h-full w-full outline-none focus:border-gray-300 bg-transparent"})}),(0,e.jsx)("div",{className:"bg-white text-bold p-2 rounded-md grid place-items-center w-8 h-8 cursor-pointer",onClick:()=>{var t,o,l,b,O;s.length==0?a("Select the country first"):((t=c.current)==null?void 0:t.value)==null||((o=c.current)==null?void 0:o.value)==null||((l=c.current)==null?void 0:l.value)==""?F("Enter the city name"):(i(!0),F(null),Q((O=(b=c.current)==null?void 0:b.value)!=null?O:"",s[0].id))},children:(0,e.jsx)(x,{icon:H})})]}),g==""||g==null||g==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:g}),r==""||r==null||r==null?null:(0,e.jsxs)("div",{className:"bg-white bg-opacity-10 border-2 text-center border-black rounded-md text-black text-md font-normal text-md my-4",children:[r.name," - ",r.code]}),(0,e.jsxs)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:["Phone number  ",(0,e.jsx)("span",{className:"text-rose-500 text-2xl font-semibold",children:"*"})]}),(0,e.jsxs)("div",{className:"p-2 w-full outline-none bg-[#EEEEEE] focus:border-gray-300 rounded-md flex",children:[(0,e.jsx)("div",{className:"text-center text-black font-normal text-md mr-4",children:r==null?0:r.country.isd}),(0,e.jsx)("input",{onChange:K,value:m,type:"text",className:"w-full outline-none bg-transparent focus:border-gray-300 rounded-md resize-none"})]}),(0,e.jsxs)("div",{className:"flex gap-2 mt-4 items-center",children:[(0,e.jsx)("div",{children:(0,e.jsx)("input",{checked:v,onChange:Y,type:"checkbox",name:"check2"})}),(0,e.jsx)("p",{className:"text-left text-[10px] text-black font-normal",children:"The above details are true and correct"})]}),f==""||f==null||f==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:f}),(0,e.jsx)("div",{className:"w-full",onClick:async()=>{if(s.length==0)a("Select the country");else if(A.length==0)a("Select your gender");else if(r==null||s==null)a("Select the city");else if(m==null||m==null||m==0)a("Fill the contact number");else if(!v)a("Check the box in order to proceed");else{let t={id:k,cityId:r.id,userContact:m,userGender:d[0]=="MALE"?"1":d[0]=="FEMALE"?"2":"3"},o=await w({method:"post",url:`${N}/api/updateuser`,data:t,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Options":"*","Access-Control-Allow-Methods":"*","X-Content-Type-Options":"*","Content-Type":"application/json",Accept:"*"}});if(o.data.status==!1)return a(o.data.message);V(5),I.current.click()}},children:(0,e.jsx)(P,{text:E?"Next":"Finish",textColor:"text-white",width:"w-full",background:"bg-primary",fontwidth:"font-bold"})}),(0,e.jsx)("div",{className:"hidden",children:(0,e.jsxs)(T,{method:"post",className:"hidden",children:[(0,e.jsx)("input",{type:"hidden",name:"id",value:k.toString()}),(0,e.jsx)("input",{type:"hidden",name:"address",value:E?"/home/profilecomplete/fifthpage":"/home"}),(0,e.jsx)("button",{ref:I,name:"submit",children:"Submit"})]})})]})})})]})},ee=_;export{ee as default};
