import{a as D}from"/build/_shared/chunk-PVR2SU5N.js";import{a as H}from"/build/_shared/chunk-6ONMTUBQ.js";import{a as v,b as h}from"/build/_shared/chunk-MNPIC26H.js";import"/build/_shared/chunk-PO5G3Y6Y.js";import{K as w,Q as B,a as f}from"/build/_shared/chunk-VYXQYHL2.js";import{b as O,d as $,l as T}from"/build/_shared/chunk-BDKSMX4O.js";import{c as y,d as Z,e as M}from"/build/_shared/chunk-7UEYUE33.js";var n=y(Z());var e=y(M());var _=()=>{let g=T(),N=g.user.id,G=g.country,C=["MALE","FEMALE","TRANSGENDER"],j=g.user.role.code=="50",[i,R]=(0,n.useState)([]),[P,A]=(0,n.useState)(!1),[s,k]=(0,n.useState)([]),[X,E]=(0,n.useState)(!1),[m,a]=(0,n.useState)(""),[u,S]=(0,n.useState)(null),[q,b]=(0,n.useState)(!1),[L,z]=(0,n.useState)([]),[r,U]=(0,n.useState)(null),[d,J]=(0,n.useState)(),K=t=>{J(t.target.value.replace(/\D/g,""))},c=(0,n.useRef)(null),Q=async(t,o)=>{let l=await v.post(`${h}/api/get-city`,{search:t,countryId:o});z(l.data.data)},V=D(t=>t.setIndex),te=O(),[x,W]=(0,n.useState)(!1),Y=()=>{W(!x)},F=(0,n.useRef)(null);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:`w-full h-screen bg-black bg-opacity-25 fixed top-0 left-0  place-items-center ${q?"grid":"hidden"}`,children:(0,e.jsx)("div",{className:"bg-white shadow-md w-80 rounded-lg p-4",children:L.length==0?(0,e.jsxs)("div",{className:"min-h-96",children:[(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:"No city found with this name"}),(0,e.jsx)("button",{className:"px-2 mx-auto bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",onClick:()=>{b(!1)},children:"Close"})]}):(0,e.jsx)("div",{className:"h-72 overflow-y-scroll no-scrollbar",children:L.map((t,o)=>(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{onClick:()=>{U(t),b(!1),c.current.value=""},className:"my-6 cursor-pointer bg-white rounded-md py-1 border-2 text-center font-normal text-md hover:border-emerald-500",children:[t.name," - ",t.code]},o)}))})})}),(0,e.jsx)("div",{className:"p-8 w-full",children:(0,e.jsx)("div",{className:"flex w-full",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("p",{className:"text-black text-left font-normal text-lg mt-4",children:"Country"}),(0,e.jsxs)("div",{className:"bg-[#EEEEEE] h-10 rounded-lg  flex gap-1 pl-2 w-full",children:[(0,e.jsx)("div",{className:"flex gap-x-2 overflow-x-scroll flex-nowrap no-scrollbar",children:i.map((t,o)=>(0,e.jsx)("div",{className:"flex bg-white my-1 rounded-md py-1 px-2 items-center gap-x-4",children:(0,e.jsx)("h1",{className:" text-black font-semibold text-center w-40",children:`${t.name} - [${t.code}]`})},o))}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsx)("div",{className:"grid place-items-center px-4 bg-gray-300 rounded-lg",onClick:()=>{A(!0)},children:(0,e.jsx)(f,{icon:w})})]}),(0,e.jsx)("div",{className:`w-full h-screen bg-gray-300 bg-opacity-20 fixed top-0 left-0 ${P?"":"hidden"} grid place-items-center`,children:(0,e.jsxs)("div",{className:"bg-white p-10 cursor-pointer",children:[(0,e.jsx)("div",{className:"min-h-80 overflow-y-scroll no-scrollbar w-80",children:G.map((t,o)=>(0,e.jsxs)("h1",{onClick:()=>{R(l=>[t])},className:`text-lg text-center font-normal rounded-md w-full my-2 border-2 ${i.includes(t)?"border-green-500 text-green-500":"border-gray-800 text-black"}  no-scrollbar`,children:[t.code," - ",t.name]},o))}),(0,e.jsx)("div",{onClick:()=>{A(!1)},className:"my-4 bg-red-500 bg-opacity-10 b-2 border-red-500 px-4 py-1 text-red-500 font-medium text-center",children:"Close"})]})}),(0,e.jsx)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:"Gender"}),(0,e.jsxs)("div",{className:"bg-[#EEEEEE] h-10 rounded-lg  flex gap-1 pl-2 w-full",children:[(0,e.jsx)("div",{className:"flex gap-x-2 overflow-x-scroll flex-nowrap no-scrollbar",children:s.map((t,o)=>(0,e.jsx)("div",{className:"flex bg-white my-1 rounded-md py-1 px-2 items-center gap-x-4",children:(0,e.jsx)("h1",{className:" text-black font-semibold text-center w-40",children:t})},o))}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsx)("div",{className:"grid place-items-center px-4 bg-gray-300 rounded-lg",onClick:()=>{E(!0)},children:(0,e.jsx)(f,{icon:w})})]}),(0,e.jsx)("div",{className:`w-full h-screen bg-gray-300 bg-opacity-20 fixed top-0 left-0 ${X?"":"hidden"} grid place-items-center`,children:(0,e.jsxs)("div",{className:"bg-white p-10 cursor-pointer",children:[(0,e.jsx)("div",{className:"min-h-80 overflow-y-scroll no-scrollbar w-80",children:C.map((t,o)=>(0,e.jsx)("h1",{onClick:()=>{if(s.includes(t)){let l=s.filter(p=>p!=t);k(l)}else k([t])},className:`text-lg text-center font-normal rounded-md w-full my-2 border-2 ${s.includes(t)?"border-green-500 text-green-500":"border-gray-800 text-black"}  no-scrollbar`,children:t},o))}),(0,e.jsx)("div",{onClick:()=>{E(!1)},className:"my-4 bg-red-500 bg-opacity-10 b-2 border-red-500 px-4 py-1 text-red-500 font-medium text-center",children:"Close"})]})}),(0,e.jsx)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:"City"}),(0,e.jsxs)("div",{className:"w-full bg-[#EEEEEE] rounded-md flex p-2",children:[(0,e.jsx)("div",{className:"grow",children:(0,e.jsx)("input",{ref:c,className:"h-full w-full outline-none focus:border-gray-300 bg-transparent"})}),(0,e.jsx)("div",{className:"bg-white text-bold p-2 rounded-md grid place-items-center w-8 h-8 cursor-pointer",onClick:()=>{var t,o,l,p,I;((t=c.current)==null?void 0:t.value)==null||((o=c.current)==null?void 0:o.value)==null||((l=c.current)==null?void 0:l.value)==""?S("Enter the city name"):(b(!0),S(null),Q((I=(p=c.current)==null?void 0:p.value)!=null?I:"",i[0].id))},children:(0,e.jsx)(f,{icon:B})})]}),u==""||u==null||u==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:u}),r==""||r==null||r==null?null:(0,e.jsxs)("div",{className:"bg-white bg-opacity-10 border-2 text-center border-black rounded-md text-black text-md font-normal text-md my-4",children:[r.name," - ",r.code]}),(0,e.jsx)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:"Phone number"}),(0,e.jsxs)("div",{className:"p-2 w-full outline-none bg-[#EEEEEE] focus:border-gray-300 rounded-md flex",children:[(0,e.jsx)("div",{className:"text-center text-black font-normal text-md mr-4",children:r==null?0:r.country.isd}),(0,e.jsx)("input",{onChange:K,value:d,type:"text",maxLength:10,className:"w-full outline-none bg-transparent focus:border-gray-300 rounded-md resize-none"})]}),(0,e.jsxs)("div",{className:"flex gap-2 mt-4 items-center",children:[(0,e.jsx)("div",{children:(0,e.jsx)("input",{checked:x,onChange:Y,type:"checkbox",name:"check2"})}),(0,e.jsx)("p",{className:"text-left text-[10px] text-black font-normal",children:"The above details are true and correct"})]}),m==""||m==null||m==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:m}),(0,e.jsx)("div",{className:"w-full",onClick:async()=>{if(i.length==0)a("Select the country");else if(C.length==0)a("Select your gender");else if(r==null||i==null)a("Select the city");else if(d==null||d==null||d==0)a("Fill the contact number");else if(d.toString().length!=10)a("Enter a 10 degit valid contact number");else if(!x)a("Check the box in order to procide");else{let t={id:N,cityId:r.id,userContact:d,userGender:s[0]=="MALE"?"1":s[0]=="FEMALE"?"2":"3"},o=await v({method:"post",url:`${h}/api/updateuser`,data:t,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Options":"*","Access-Control-Allow-Methods":"*","X-Content-Type-Options":"*","Content-Type":"application/json",Accept:"*"}});if(o.data.status==!1)return a(o.data.message);V(4),F.current.click()}},children:(0,e.jsx)(H,{text:"Next",textColor:"text-white",width:"w-full",background:"bg-primary",fontwidth:"font-bold"})}),(0,e.jsx)("div",{className:"hidden",children:(0,e.jsxs)($,{method:"post",className:"hidden",children:[(0,e.jsx)("input",{type:"hidden",name:"id",value:N.toString()}),(0,e.jsx)("input",{type:"hidden",name:"address",value:j?"/home/profilecomplete/fifthpage":"/home"}),(0,e.jsx)("button",{ref:F,name:"submit",children:"Submit"})]})})]})})})]})},ee=_;export{ee as default};
