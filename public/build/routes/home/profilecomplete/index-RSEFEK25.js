import{a as G}from"/build/_shared/chunk-XTP3C3EQ.js";import{a as g}from"/build/_shared/chunk-NJKAJ7NJ.js";import{a as K}from"/build/_shared/chunk-KJTVB6JA.js";import"/build/_shared/chunk-5ROUF77C.js";import{b as P,d as q,l as X}from"/build/_shared/chunk-P4VL4XDR.js";import{a as _,b as $}from"/build/_shared/chunk-WLYSEPGK.js";import{e as x,g as Z,h as Y}from"/build/_shared/chunk-EUC6ZTEW.js";var t=x(Z());var e=x(Y());var ee=()=>{let b=X(),v=b.user.email,E=b.user.id,J=G(l=>l.setIndex),le=P(),[i,Q]=(0,t.useState)(null),w=(0,t.useRef)(null),[c,h]=(0,t.useState)(null),[d,n]=(0,t.useState)(null),o=(0,t.useRef)(null),r=(0,t.useRef)(null),a=(0,t.useRef)(null),s=(0,t.useRef)(null),u=(0,t.useRef)(null);(0,t.useEffect)(()=>{o.current.value=v,r.current.value=v},[]);let N=(0,t.useRef)(null),m=new Date;m.setFullYear(m.getFullYear()-15);let V=m.toISOString().split("T")[0];return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"p-8 w-full",children:[(0,e.jsx)("h1",{className:"text-2xl text-black font-bold",children:"Tell us about yourself"}),(0,e.jsxs)("div",{className:"flex w-full md:flex-row flex-col",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"hidden",children:(0,e.jsx)("input",{type:"file",accept:"image/*",ref:w,onChange:l=>{parseInt((l.target.files[0].size/1024/1024).toString())<4?(h(null),Q(l.target.files[0])):h("Image file size must be less then 4 mb")}})}),(0,e.jsxs)("div",{className:"bg-gray-200 rounded-lg my-6 mr-6 p-4 text-gray-400 flex md:flex-col flex-row w-full md:w-56",children:[(0,e.jsx)("div",{className:"grow sm:w-full",children:i==null?(0,e.jsx)("img",{src:"/images/icons/gallery.png",alt:"error",className:"w-40 sm:w-full object-cover inline-block"}):(0,e.jsx)("img",{src:URL.createObjectURL(i),alt:"error",className:"w-40 sm:w-full inline-block object-cover rounded-md"})}),(0,e.jsxs)("div",{className:"w-52 sm:w-full",children:[(0,e.jsx)("p",{className:"mt-4",children:"Drop profile photo here."}),(0,e.jsx)("p",{className:"mt-4",children:"The image should either be jpg jped or png format and be a maximum size of 5 MB"}),c==""||c==null||c==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:c}),(0,e.jsx)("div",{onClick:()=>{var l;(l=w.current)==null||l.click()},children:(0,e.jsx)(g,{text:"Upload",textColor:"text-white",width:"w-full",background:"bg-primary"})})]})]})]}),(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsxs)("p",{className:"text-black text-left font-normal text-lg mt-4",children:["Email ",(0,e.jsx)("span",{className:"text-rose-500 text-2xl font-semibold",children:"*"})]}),(0,e.jsx)("input",{ref:o,disabled:!0,type:"text",className:"bg-[#EEEEEE]  outline-none border-none focus:border-gray-300 rounded-md w-full p-2"}),(0,e.jsxs)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:["Username ",(0,e.jsx)("span",{className:"text-rose-500 text-2xl font-semibold",children:"*"})]}),(0,e.jsx)("input",{ref:r,type:"text",className:"bg-[#EEEEEE]  outline-none border-none focus:border-gray-300 rounded-md w-full p-2"}),(0,e.jsxs)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:["Nickname ",(0,e.jsx)("span",{className:"text-rose-500 text-2xl font-semibold",children:"*"})]}),(0,e.jsx)("input",{ref:a,type:"text",className:"bg-[#EEEEEE]  outline-none border-none focus:border-gray-300 rounded-md w-full p-2"}),(0,e.jsxs)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:["Date of birth ",(0,e.jsx)("span",{className:"text-rose-500 text-2xl font-semibold",children:"*"})]}),(0,e.jsx)("input",{type:"date",ref:s,className:"bg-[#EEEEEE]  outline-none border-none focus:border-gray-300 rounded-md w-full p-2",max:V}),(0,e.jsxs)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:["Bio ",(0,e.jsx)("span",{className:"text-rose-500 text-2xl font-semibold",children:"*"})]}),(0,e.jsx)("textarea",{ref:u,className:"p-4 w-full h-40 outline-none border-2 bg-[#EEEEEE] focus:border-gray-300 rounded-md resize-none"}),d==""||d==null||d==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:d}),(0,e.jsx)("div",{onClick:async()=>{var l,f,y,A,k,C,I,L,T,B,O,S,D,F,H,M,U,j,z;if(i==null)n("Please select the image");else if(((l=o.current)==null?void 0:l.value)==null||((f=o.current)==null?void 0:f.value)==null||((y=o.current)==null?void 0:y.value)=="")n("Enter the email");else if(((A=r.current)==null?void 0:A.value)==null||((k=r.current)==null?void 0:k.value)==null||((C=r.current)==null?void 0:C.value)=="")n("Enter the username");else if(((I=a.current)==null?void 0:I.value)==null||((L=a.current)==null?void 0:L.value)==null||((T=a.current)==null?void 0:T.value)=="")n("Enter the nickname");else if(((B=s.current)==null?void 0:B.value)==null||((O=s.current)==null?void 0:O.value)==null||((S=s.current)==null?void 0:S.value)=="")n("Enter the date of birth");else if(((D=u.current)==null?void 0:D.value)==null||((F=u.current)==null?void 0:F.value)==null||((H=u.current)==null?void 0:H.value)=="")n("Enter the bio");else{let p=await K(i);if(p.status){let W={id:E,userName:(M=r.current)==null?void 0:M.value,userKnownAs:(U=a.current)==null?void 0:U.value,userBioInfo:(j=u.current)==null?void 0:j.value,userDOB:(z=s.current)==null?void 0:z.value,userPicUrl:p.data},R=await _({method:"post",url:`${$}/api/updateuser`,data:W,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Options":"*","Access-Control-Allow-Methods":"*","X-Content-Type-Options":"*","Content-Type":"application/json",Accept:"*"}});if(R.data.status==!1)return n(R.data.message);J(2),N.current.click()}else n(p.data)}},children:(0,e.jsx)(g,{text:"Next",textColor:"text-white",width:"w-full",background:"bg-primary",fontwidth:"font-bold"})}),(0,e.jsxs)(q,{method:"post",className:"hidden",children:[(0,e.jsx)("input",{type:"hidden",name:"id",value:E.toString()}),(0,e.jsx)("button",{ref:N,name:"submit",children:"Submit"})]})]})]})]})})},te=ee;export{te as default};
