import{a as S}from"/build/_shared/chunk-XTP3C3EQ.js";import{a as x}from"/build/_shared/chunk-NJKAJ7NJ.js";import"/build/_shared/chunk-5ROUF77C.js";import{a as N,b as k}from"/build/_shared/chunk-WI5Z27OJ.js";import{d as C,l as y}from"/build/_shared/chunk-P4VL4XDR.js";import{e as g,g as E,h as v}from"/build/_shared/chunk-EUC6ZTEW.js";var s=g(E());var e=g(v());var T=()=>{let h=y(),w=h.user.id,A=h.paltform,[r,m]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[d,n]=(0,s.useState)(null),[i,a]=(0,s.useState)(null),O=S(t=>t.setIndex),b=(0,s.useRef)(null);return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"p-8 w-full",children:[(0,e.jsx)("h1",{className:"text-2xl text-black font-bold",children:"Channels"}),(0,e.jsxs)("div",{className:"flex content-center items-center gap-2 flex-col md:flex-row mt-2",children:[(0,e.jsx)("div",{className:"md:flex gap-2 mt-2 grid place-items-center grid-cols-4",children:A.map((t,c)=>(0,e.jsx)("div",{className:`w-12 h-12 p-2 rounded-lg ${r.includes(t)?"bg-white shadow-xl ":"bg-gray-200"} `,onClick:()=>{m([t])},children:(0,e.jsx)("img",{src:A[c].platformLogoUrl,alt:"error",className:"w-10"})},c))}),(0,e.jsx)("div",{className:"grow hidden md:block"}),(0,e.jsx)("div",{onClick:()=>{if(n(null),a(null),r.length==0)return n("Select any platform first.");if(o.length>0)if(o[o.length-1].status==!0)l(t=>[...t,{val:r[0],status:!1,text:""}]),m([]);else return n("Complete you last handle first.");o.length==0&&(l(t=>[...t,{val:r[0],status:!1,text:""}]),m([]))},children:(0,e.jsx)(x,{text:"Add new Channel",textColor:"text-white",width:"w-36",background:"bg-primary",fontwidth:"font-normal",textSize:"text-md"})})]}),(0,e.jsx)("div",{className:"flex w-full",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{children:o.map((t,c)=>(0,e.jsxs)("div",{className:"bg-[#EEEEEE]  outline-none border-none focus:border-gray-300 rounded-md w-full p-2 mt-2 flex ",children:[(0,e.jsx)("div",{children:(0,e.jsx)("img",{src:`${t.val.platformLogoUrl}`,alt:"logo",className:"w-10"})}),(0,e.jsx)("input",{disabled:t.status,type:"text",value:t.text,onChange:f=>{let u=o.filter(p=>p!=t);l([...u,{val:t.val,status:!1,text:f.target.value}])},className:"mx-3 bg-transparent  outline-none border-none focus:border-gray-300 rounded-md w-full"}),t.status?null:(0,e.jsx)("div",{className:"text-white bg-green-500 font-medium text-md text-center rounded-md grid place-items-center px-4 cursor-pointer",onClick:async()=>{if(t.text==null||t.text==null||t.text=="")a(null),n("Fill the handle name");else if(t.text.indexOf(" ")>=0)a(null),n("Hashtag cannot contains space");else{let f={userId:w,platformId:t.val.id,handleName:t.text},u=await N({method:"post",url:`${k}/api/add-handle`,data:f,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Options":"*","Access-Control-Allow-Methods":"*","X-Content-Type-Options":"*","Content-Type":"application/json",Accept:"*"}});if(u.data.status==!1)return a(null),n(u.data.message);{n(null),a("Successfully added the user handle");let p=o.filter(L=>L!=t);l([...p,{val:t.val,status:!0,text:t.text}])}}},children:"Done"})]},c))}),d==""||d==null||d==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:d}),i==""||i==null||i==null?null:(0,e.jsx)("div",{className:"bg-green-500 bg-opacity-10 border-2 text-center border-green-500 rounded-md text-green-500 text-md font-normal text-md my-4",children:i}),(0,e.jsx)("div",{onClick:()=>{o.length==0?(a(null),n("Add at least one handle")):o[0].status?(O(4),b.current.click()):(a(null),n("Add at least one handle"))},children:(0,e.jsx)(x,{text:"Next",textColor:"text-white",width:"w-full",background:"bg-primary",fontwidth:"font-bold"})}),(0,e.jsxs)(C,{method:"post",className:"hidden",children:[(0,e.jsx)("input",{type:"hidden",name:"id",value:w.toString()}),(0,e.jsx)("button",{ref:b,name:"submit",children:"Submit"})]})]})})]})})},F=T;export{F as default};
